(self.webpackChunklite=self.webpackChunklite||[]).push([[1838],{80087:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.createElement("path",{d:"M3.85 5.15a.5.5 0 0 0-.7.7l4.35 4.36 4.35-4.36a.5.5 0 1 0-.7-.7L7.5 8.79 3.85 5.15z",fillRule:"evenodd"});const s=function(e){return r.createElement("svg",o({width:15,height:15,viewBox:"0 0 15 15"},e),i)}},59116:(e,t,n)=>{"use strict";n.d(t,{Te:()=>r,_M:()=>o,ed:()=>i});var r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){return 2===e.type&&1===e.path.length}))},o=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},i=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},78067:(e,t,n)=>{"use strict";var r;n.d(t,{r:()=>r}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(r||(r={}))},5399:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var r=n(28655),o=n.n(r);function i(){var e=o()(["\n  fragment getSlateBodyFromPostBodyModel_bodyModel on RichText {\n    paragraphs {\n      id\n      name\n      text\n      type\n      markups {\n        type\n        start\n        end\n        href\n        anchorType\n        userId\n        linkMetadata {\n          httpStatus\n        }\n      }\n    }\n  }\n"]);return i=function(){return e},e}var s=(0,n(71439).Ps)(i())},31933:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var r=n(67294),o=n(89894),i=n(67122),s=function(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement(o.xu,{marginTop:"-240px",background:"linear-gradient(".concat((0,i.l9)(0),",\n        ").concat((0,i.l9)(.5),",\n        ").concat((0,i.l9)(1),")"),height:"250px",position:"relative",width:"100%"}),r.createElement(o.xu,{backgroundColor:"BACKGROUND"},r.createElement(o.xu,{margin:"auto",maxWidth:"760px",sm:{margin:"0 18px 0"}},t)))}},4995:(e,t,n)=>{"use strict";n.d(t,{P:()=>D,F:()=>k});var r=n(28655),o=n.n(r),i=n(71439),s=n(67294),a=n(70561),l=n(31933),c=n(51562),u=n(66893),p=n(9785),d=n(89714),m=n(37258),g=n(19608),f=n(27168),v=n(48881),h=n(62876),E=n(89894),b=n(80735),y=n(62240),x=n(62630),P=n(27572),S=n(96907),R=n(33572),O=n(88914),I=n(27952);function w(){var e=o()(["\n  fragment PayWall_post on Post {\n    id\n  }\n"]);return w=function(){return e},e}var _=function(e){var t=e.optimizelyFeatureString,n=e.post,r=e.viewer,o=e.showTrialPaywall,i=e.authDomain,a=!!(0,u.P5)("enable_lite_pay_page"),l=!!(0,u.P5)("enable_new_checkout_flow");return s.createElement(P.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:n.id}},s.createElement(S.M,null,s.createElement(E.xu,{display:"inline-block",textAlign:"center"},s.createElement(c.W,{featureString:t,target:o?"trial-upsell-button":"upsell-button-".concat(r&&r.hasPastMemberships?"resume-membership":"upgrade")},s.createElement(h.a,{isButton:!0,buttonStyle:o?"BRAND":"STRONG",width:o||r&&r.hasPastMemberships?"182px":"104px",redirectUrl:a&&(o||l)?(0,I.c5)(i):(0,I.KP)(i)},o?"Start your free trial":r&&r.hasPastMemberships?"Resume membership":"Upgrade")))))},C=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=(0,a.I0)();return s.createElement(P.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},s.createElement(E.xu,{display:"flex",sm:{flexDirection:"column"}},s.createElement(E.xu,{display:"flex",flexDirection:"row",justifyContent:"center"},n.facebook||n.google||n.twitter?s.createElement(g.r,{userSocialLogins:n}):s.createElement(m.o,{onSuccess:function(){return r((0,O.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:n.userId},(function(e){var t=e.handleSubmit;return s.createElement(E.zx,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")})))),t&&s.createElement(E.xu,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},s.createElement(y.F,{scale:"M"},s.createElement(f.G,{declineSuggestedAccount:t,isSocial:!!n&&!!(n.facebook||n.google||n.twitter)}))))},T=function(e){var t=e.declineSuggestedAccount,n=e.userSocialLogins,r=e.suggestedAccountEventData,o=e.showSuggestedAccount,i=e.postId;return s.createElement(P.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:i}},s.createElement(S.M,{eventData:r},s.createElement(E.xu,{display:"inline-block",textAlign:"center"},s.createElement(C,{declineSuggestedAccount:t,showSuggestedAccount:o,userSocialLogins:n}),s.createElement(E.xu,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},s.createElement(y.F,{scale:"L"},s.createElement(h.a,{eventData:r,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},k=function(e){var t=e.post,n=(0,a.v9)((function(e){return{sessionUserId:e.session.user.id,authDomain:e.config.authDomain,productName:e.config.productName}}),a.wU),r=n.productName,o=n.sessionUserId,i=n.authDomain,m=(0,p.YC)().value,g=(0,x.Av)(),f=null==m?void 0:m.isMembershipTrialEligible,h=!(!(0,u.P5)("enable_trial_upsell")||!f),P=!!(0,u.P5)("enable_unbound");s.useEffect((function(){f&&g.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var S="paywall";return s.createElement(d.N8,null,s.createElement(l.F,null,s.createElement(v.o,{postRenderCallback:function(){}},(function(e){var n,a=e.loading,l=e.showSuggestedAccount,u=e.declineSuggestedAccount,p=e.userSocialLogins;return a?s.createElement(s.Fragment,null):(l&&(S="suggested-account-paywall"),l&&(n={alternateUserSuggestionShown:l,alternateUserSuggestionAccountType:(0,R.S)(p),alternateUserSuggestionTargetUserId:!!p&&p.userId,alternateUserSuggestionSourceUserId:m?m.id:o}),s.createElement(s.Fragment,null,s.createElement(c.W,{featureString:S,target:h?"trial-background-color":"background-color"},s.createElement(E.xu,{display:"flex",minHeight:"350px",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},s.createElement(E.xu,{display:"flex",flexDirection:"column",padding:"48px 50px",sm:{padding:"28px 16px 32px",textAlign:"center"}},s.createElement(c.W,{featureString:S,target:h?"webCCTrialHeading":"fewerClicksHeading"},s.createElement(b.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,t,n){var r=n.enableUnbound,o=n.showSuggestedAccount,i=n.showTrialPaywall,a=t?(0,R.J)(t):null;return a=a&&a.length<=13?a:null,o?"Switch to your member account for unlimited reading.":i?s.createElement(E.xu,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},a?"".concat(a,", keep reading."):"Keep reading."):r?s.createElement(E.xu,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},"How to read this story — and everything else on ",e,"."):s.createElement(E.xu,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},a?"".concat(a,", get unlimited access."):"Get unlimited access.")}(r,m&&m.name,{enableUnbound:P,showSuggestedAccount:l,showTrialPaywall:h}))),s.createElement(y.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},!l&&!h&&s.createElement(s.Fragment,null,s.createElement(c.W,{featureString:S,target:"second-header-fewer-clicks"},s.createElement(E.xu,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},P?"Not every story on ".concat(r," is free, like this one. Become a member to get unlimited access and support the voices you want to hear more from."):"You've read all of your free stories this month. Become a member to keep reading.")),s.createElement(E.xu,{display:"flex",justifyContent:"flex-start",sm:{justifyContent:"center"}},s.createElement(_,{optimizelyFeatureString:S,post:t,viewer:m,showTrialPaywall:h,authDomain:i}))),s.createElement(c.W,{featureString:S,target:h?"subtitle-copy-web-cc-trial":"subtitle-copy-fewer-clicks"},s.createElement(E.xu,{marginTop:l?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,t,n,r){var o=n.enableUnbound,i=n.showTrialPaywall;if(n.showSuggestedAccount&&t){var a=t.isMember,l=t.redactedEmailAddress;return s.createElement(s.Fragment,null,"Looks like you're coming from the ",a&&"member ","account"," ",s.createElement("b",null,l)," but you’re signed in as ",s.createElement("b",null,null==r?void 0:r.email),". Switch to your",a?" member account for unlimited access":" account",".")}return o?s.createElement(E.xu,{marginTop:"28px",marginBottom:"28px",textAlign:i?"center":"left"},i?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):s.createElement(s.Fragment,null,s.createElement("b",null,"Read any story. "),"Access everything on ",e," across all your devices with no limits or ads.",s.createElement("br",null),s.createElement("br",null),s.createElement("b",null,"Reward great writing. "),"A portion of your membership fee will go toward the writers you read most.")):i?s.createElement(E.xu,{marginTop:"28px",marginBottom:"28px"},"You’ve reached your limit of free member-only stories this month. Get unlimited access to every idea on ",e,", free for 1 month. If it's not for you, cancel anytime."):s.createElement(E.xu,{marginTop:"28px",marginBottom:"28px",textAlign:"left"},"Here's what you get when you upgrade to membership:",s.createElement(E.xu,{marginTop:"28px",marginBottom:"28px"},s.createElement("b",null,"Unlimited access. ")," Explore ",e,"'s library filled with everything you're curious about."),s.createElement(E.xu,{marginBottom:"28px"},s.createElement("b",null,"Reward quality writing.")," When you spend time reading a story, a portion of your membership fee will go directly to its author."),s.createElement(E.xu,{marginBottom:"28px"},'"I love ',e,"'s membership — it gives me access to the stories I love by the writers I love, and it allows me to help support those writers financially.\"",s.createElement("br",null)," ",s.createElement("b",null,"—Kayt Molina, ",e," member ")))}(r,p,{enableUnbound:P,showSuggestedAccount:l,showTrialPaywall:h},m)))),!!l&&p&&s.createElement(T,{declineSuggestedAccount:u,userSocialLogins:p,suggestedAccountEventData:n,showSuggestedAccount:l,postId:t.id}),h&&!l&&s.createElement(_,{optimizelyFeatureString:S,post:t,viewer:m,showTrialPaywall:h,authDomain:i}))))))}))))},D=(0,i.Ps)(w())},86987:(e,t,n)=>{"use strict";n.d(t,{Mt:()=>w,E7:()=>_,VP:()=>C});var r=n(28655),o=n.n(r),i=n(71439),s=n(67294),a=n(6401),l=n(31933),c=n(51562),u=n(66893),p=n(89714),d=n(62181),m=n(5731),g=n(59317),f=n(81405),v=n(90174),h=n(4134),E=n(89894),b=n(80735),y=n(62630),x=n(27572),P=n(37581);function S(){var e=o()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return S=function(){return e},e}function R(){var e=o()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return R=function(){return e},e}var O="post_regwall",I=function(e){var t=e.enableNewSusiModal,n=e.meterCount,r=e.optimizelyFeatureString,o=e.postId,i={operation:"register"},a=(0,g.j)().openModal;return s.createElement(E.xu,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},s.createElement(c.W,{featureString:r,target:"google-button"},s.createElement(E.xu,{margin:"".concat(t?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},s.createElement(P.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},s.createElement(h.x,i)))),s.createElement((function(e){var n=e.children;return t?s.createElement(c.W,{featureString:r,target:"google-button"},n):n}),null,s.createElement(E.xu,{marginBottom:t?"32px":"52px",sm:{marginBottom:"40px"}},s.createElement(P.$,{eventData:{meterCount:n,operation:i.operation,postId:o}},t?s.createElement(f.R,{goToEmailAuthStep:function(){a({step:"ENTER_EMAIL",susiEntry:O,operation:"register"})},operation:"register"}):s.createElement(v.q,i)))))},w=function(e){var t=e.meteringInfo,n=e.post,r=(0,y.Av)(),o=!!(0,u.P5)("enable_new_susi_modal"),i="LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource,g="".concat(i?"syndicated-":"","regwall");return s.useEffect((function(){r.event("meter.viewed",{meterCount:null==t?void 0:t.postIds.length,postId:n.id,uiType:i?m.j.SyndicatedRegwall:m.j.RegWall})}),[]),s.createElement(p.N8,null,s.createElement(x.cW,{source:{postId:n.id,susiEntry:O}},s.createElement(l.F,null,s.createElement(c.W,{featureString:g,target:"background-color"},s.createElement(E.xu,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},s.createElement(E.xu,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},s.createElement(c.W,{featureString:g,target:"heading"},s.createElement(b.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},s.createElement(E.xu,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),s.createElement(E.xu,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account."))),s.createElement(b.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},s.createElement(E.xu,{display:"block",margin:"auto",paddingTop:"10px",sm:{display:"none"},width:"500px"},"You’ll also discover more fresh thinking personalized to your interests and can follow your favorite authors, publications, and topics."),s.createElement(E.xu,{display:"none",sm:{display:"block"}},s.createElement(E.xu,{margin:"".concat(o?"40px":"42px"," 0")},s.createElement(a.a,{isButton:!0,postId:n.id,appEntry:"regwall"})),s.createElement(c.W,{featureString:g,target:"skip-app-copy"},s.createElement(E.xu,{marginBottom:"-20px"},"Or, continue in mobile web"))),s.createElement(I,{meterCount:null==t?void 0:t.postIds.length,optimizelyFeatureString:g,postId:n.id,enableNewSusiModal:o}),o?s.createElement(c.W,{featureString:g,target:"sign-in-link",tag:"span"},s.createElement(d.R9,{linkStyle:"OBVIOUS",operation:"login",post:n,susiEntry:O},"More sign in options")):s.createElement(s.Fragment,null,s.createElement(c.W,{featureString:g,target:"sign-in-copy",tag:"span"},"Already have an account?"," "),s.createElement(c.W,{featureString:g,target:"sign-in-link",tag:"span"},s.createElement(d.R9,{linkStyle:"OBVIOUS",operation:"login",post:n,susiEntry:O},"Sign in"))))))))))},_=(0,i.Ps)(R(),d.qU),C=(0,i.Ps)(S())},12390:(e,t,n)=>{"use strict";n.d(t,{h:()=>d,P:()=>m});var r=n(28655),o=n.n(r),i=n(71439),s=n(67294),a=n(70561),l=n(42963),c=n(24087),u=n(27952);function p(){var e=o()(["\n  fragment MaybeRedirectToEditor_post on Post {\n    id\n    isPublished\n    collection {\n      id\n      viewerCanEditOwnPosts\n      viewerCanEditPosts\n      viewerIsEditor\n    }\n    creator {\n      id\n    }\n  }\n"]);return p=function(){return e},e}var d=(0,i.Ps)(p()),m=(0,a.$j)((function(e){return{authDomain:e.config.authDomain}}))((function(e){var t=e.authDomain,n=e.post,r=e.children;return s.createElement(c.Z,null,(function(e){return function(e,t){var n=e.collection,r=e.creator&&t&&e.creator.id===t.id,o=r&&n&&n.viewerCanEditOwnPosts||n&&(n.viewerIsEditor||n.viewerCanEditPosts);return(!e||!e.isPublished)&&(n?o:r)}(n,e)?s.createElement(l.Z,{to:(0,u.d0)(t,n.id)}):r}))}))},47921:(e,t,n)=>{"use strict";n.d(t,{i:()=>B,Z:()=>L});var r=n(28655),o=n.n(r),i=n(59713),s=n.n(i),a=n(71439),l=n(67294),c=n(70405),u=n(70561),p=n(319),d=n.n(p),m=n(82492),g=n.n(m),f=n(68254),v=n.n(f),h=n(90038),E=n(96879),b=n(22744),y=n(27952);function x(){var e=o()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      hasDomain\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    tags {\n      displayTitle\n    }\n    topics {\n      name\n      slug\n    }\n    sequence {\n      slug\n    }\n    lockedSource\n    layerCake\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n"]);return x=function(){return e},e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R="Topic";function O(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;if(!t||!n||!r)return null;var o=Math.min(r,60),i=o/r,s=Math.floor(n*i);return I({width:s,height:o,url:(0,h.W6)({miroId:t,width:s,freezeGifs:!0,strategy:h._S.Resample})})}function I(e){return S({"@type":"ImageObject"},e)}function w(e,t){return"".concat(e,":").concat(t)}const _=(0,u.$j)((function(e){var t=e.config,n=t.productName,r=t.defaultImages,o=t.collectionStructuredData,i=e.navigation;return{currentLocation:i.currentLocation,host:i.host,productName:n,defaultImages:r,collectionStructuredData:o}}))((function(e){var t=e.currentLocation,n=e.host,r=e.post,o=e.postDescription,i=e.productName,s=e.defaultImages,a=e.collectionStructuredData,u=r.collection,p=r.creator,m=r.id,f=r.mediumUrl,x=r.isLocked,P=r.previewImage,_=r.firstPublishedAt,C=r.updatedAt,T=r.tags,k=r.topics,D=r.sequence,A=r.lockedSource,j=r.layerCake,L=r.structuredData,B=(0,b._t)(r,i),M={id:s.postLogo.imageId,originalWidth:s.postLogo.width,originalHeight:s.postLogo.height},N={id:s.orgLogo.imageId,originalWidth:s.orgLogo.width,originalHeight:s.orgLogo.height},U=u?{"@type":"Organization",name:u.name,url:u.domain||(0,E.l1)(n,(0,y.WG)(u,t)),logo:function(e){if(!e||!e.logo||!e.logo.id)return O(N);var t=O(e.logo);return t&&60===t.height&&t.width<=600?t:O(N)}(u)}:{"@type":"Organization",name:i,url:(0,E.l1)(n,"/"),logo:O(N)};u&&a&&a[u.id]&&g()(U,a[u.id].data);var F=[w("Lite","true")];T&&T.forEach((function(e){e.displayTitle&&F.push(w("Tag",e.displayTitle))})),k&&k.forEach((function(e){e.name?F.push(w(R,e.name)):e.slug&&F.push(w(R,e.slug))})),u&&u.slug&&F.push(w("Publication",u.slug)),F.push(w("Elevated",(!!D).toString())),D&&D.slug&&F.push(w("Sequence",D.slug)),A&&F.push(w("LockedPostSource",A)),null!=j&&F.push(w("LayerCake",j.toString()));var H=o||"",Q=x?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},V={"@context":"http://schema.org"},W=S({"@type":"NewsArticle",image:P&&P.id?function(e){var t=e.id,n=e.originalWidth,r=e.originalHeight,o=e.focusPercentX,i=e.focusPercentY;if(!t)return null;var s=1200,a=(0,h.vz)({miroId:t,aspectRatio:16/9,croppedWidth:s,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),l=(0,h.vz)({miroId:t,aspectRatio:4/3,croppedWidth:s,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),c=(0,h.vz)({miroId:t,aspectRatio:1,croppedWidth:s,originalWidth:n,originalHeight:r,focusPercentX:o,focusPercentY:i}),u=new Set([a,l,c]);return Array.from(u)}(P):I({url:(0,h.W6)({miroId:M.id,width:M.originalWidth}),height:M.originalHeight,width:M.originalWidth}),url:f,dateCreated:_&&new Date(_).toISOString(),datePublished:_&&new Date(_).toISOString(),dateModified:C&&new Date(C).toISOString(),headline:B,name:B,description:H,identifier:m,keywords:F.length?F:null,author:p&&p.name&&p.username?{"@type":"Person",name:p.name||p.username,url:(0,y.AW)(p.username,n,p.hasDomain)}:null,creator:p&&[p.name],publisher:U,mainEntityOfPage:f},Q),$=S({},V,{},W);if(L&&L.length>0)try{var z=JSON.parse(L);if(z&&(null==z?void 0:z["@graph"])&&(null==z?void 0:z["@graph"].length)>0){var q=((null==z?void 0:z["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));q&&q.length>0&&($=S({},V,{"@graph":[W].concat(d()(q))}))}}catch(e){}return l.createElement(c.q,null,l.createElement("script",{type:"application/ld+json"},v()($,{isJSON:!0})))}));var C=(0,a.Ps)(x(),b.bq),T=n(66893),k=n(27390),D=n(71794);function A(){var e=o()(["\n  fragment PostMetadata_post on Post {\n    id\n    socialTitle\n    socialDek\n    canonicalUrl\n    mediumUrl\n    metaDescription\n    latestPublishedAt\n    visibility\n    isLimitedState\n    readingTime\n    creator {\n      name\n      username\n      twitterScreenName\n      hasDomain\n    }\n    collection {\n      ampEnabled\n      twitterUsername\n      facebookPageId\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalHeight\n      originalWidth\n    }\n    isShortform\n    ...PostJsonLd_post\n    ...postMetaDescription_post\n    ...shortformPostMetaDescription_post\n    ...shouldIndex_post\n    ...shortformPostTitle_post\n    ...getTitleDetails_post\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return A=function(){return e},e}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const L=(0,u.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var t,n,r=e.isAmp,o=e.host,i=e.authDomain,a=e.productName,u=e.post,p=u.canonicalUrl,d=u.collection,m=u.creator,g=u.id,f=u.latestPublishedAt,v=u.mediumUrl,E=u.previewContent,x=u.socialTitle,P=u.socialDek,S=u.visibility,R=u.isShortform,O=!!(0,T.P5)("default_seo_post_titles"),I=d&&d.ampEnabled,w=m&&m.name,C=(0,b.yB)(u),A=u.title||"",L=C.latestTitle||A;if(R){var B=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{title:L});t=(0,b.oS)(B,a,C.hasTitleGraf).trim(),n=(0,D.OO)(u,C.hasTitleGraf)}else t=(0,b._t)(u,a,C,O).trim(),n=(0,D.j7)(u);var M,N,U=P||E&&E.subtitle||n;if(u&&u.previewImage&&u.previewImage.id&&!u.isLimitedState){var F=u.previewImage;M=(0,h.vz)({miroId:F.id,aspectRatio:1.9,croppedWidth:F.originalWidth?Math.min(F.originalWidth,1200):1200,originalWidth:F.originalWidth,originalHeight:F.originalHeight,focusPercentX:F.focusPercentX,focusPercentY:F.focusPercentY})}else if(u.isLimitedState){var H={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};M=(0,h.vz)({miroId:H.id,aspectRatio:1.9,croppedWidth:H.originalWidth?Math.min(H.originalWidth,1200):1200,originalWidth:H.originalWidth,originalHeight:H.originalHeight,focusPercentX:H.focusPercentX,focusPercentY:H.focusPercentY})}m&&m.username&&(N=(0,y.AW)(m.username,i,m.hasDomain));var Q=(0,y.CK)(g),V=!(0,b.ao)(u),W=f&&new Date(f).toISOString(),$=(0,k.Vd)(u.readingTime||0),z=m&&m.twitterScreenName,q=d&&d.twitterUsername||"Medium",Y=d&&d.facebookPageId,Z=x||A||L;u.isLimitedState&&(Z="");var G=u.isLimitedState?"":U,K=l.useMemo((function(){return l.createElement(c.q,{htmlAttributes:r?{amp:void 0}:{}},l.createElement("meta",{property:"og:type",content:"article"}),W&&l.createElement("meta",{property:"article:published_time",content:W}),I&&!r?l.createElement("link",{rel:"amphtml",href:(0,y.Vc)(o,g)}):null,l.createElement("title",null,t),l.createElement("meta",{name:"title",content:t}),l.createElement("meta",{property:"og:title",content:Z}),l.createElement("meta",{property:"twitter:title",content:Z}),Y&&l.createElement("meta",{property:"fb:pages",content:Y}),l.createElement("meta",{name:"twitter:site",content:"@".concat(q)}),l.createElement("meta",{name:"twitter:app:url:iphone",content:Q}),l.createElement("meta",{property:"al:android:url",content:Q}),l.createElement("meta",{property:"al:ios:url",content:Q}),l.createElement("meta",{property:"al:android:app_name",content:"Medium"}),n&&l.createElement("meta",{name:"description",content:n}),U&&l.createElement("meta",{property:"og:description",content:G}),U&&l.createElement("meta",{property:"twitter:description",content:G}),l.createElement("meta",{property:"og:url",content:v}),l.createElement("meta",{property:"al:web:url",content:v}),M&&l.createElement("meta",{property:"og:image",content:M}),M&&l.createElement("meta",{name:"twitter:image:src",content:M}),l.createElement("meta",{name:"twitter:card",content:M?"summary_large_image":"summary"}),N&&l.createElement("meta",{property:"article:author",content:N}),N&&l.createElement("link",{rel:"author",href:N}),z&&l.createElement("meta",{name:"twitter:creator",content:"@".concat(z)}),w&&l.createElement("meta",{name:"author",content:w}),l.createElement("link",{rel:"canonical",href:p||v}),l.createElement("link",{rel:"alternate",href:(0,y.zi)((0,y.o2)("medium.com",u.id))}),l.createElement("meta",{name:"robots",content:"".concat(V?"noindex":"index",",follow,max-image-preview:large")}),l.createElement("meta",{name:"referrer",content:"UNLISTED"!==S?"unsafe-url":"origin"}),r?null:l.createElement("meta",{name:"twitter:label1",value:"Reading time"}),r?null:l.createElement("meta",{name:"twitter:data1",value:"".concat($," min read")}),l.createElement("meta",{name:"parsely-post-id",content:g}))}),[r,t,p,v,M,I,g,x,n,N,w,z,Q,V,W]);return l.createElement(l.Fragment,null,K,l.createElement(_,{post:u,postDescription:n}))}));var B=(0,a.Ps)(A(),C,D.iI,D.m3,b.p3,b.Pz,b.dm,b.bq)},53099:(e,t,n)=>{"use strict";n.d(t,{yx:()=>T,KR:()=>k});var r=n(63038),o=n.n(r),i=n(28655),s=n.n(i),a=n(71439),l=n(80439),c=n(67294),u=n(70561),p=n(24087),d=n(46572),m=n(89894),g=n(80735),f=n(36808),v=n(14391),h=n(67122),E=n(76579),b=n(96879),y=n(27952);function x(){var e=s()(["\n  fragment PostPublishedDialog_prerequisite_post on Post {\n    id\n    creator {\n      id\n    }\n    collection {\n      id\n      viewerIsEditor\n    }\n    creatorPartnerProgramEnrollmentStatus\n  }\n"]);return x=function(){return e},e}function P(){var e=s()(["\n  query PostPublishedDialogQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...PostPublishedDialog_post\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function S(){var e=s()(["\n  fragment PostPublishedDialog_post on Post {\n    id\n    inResponseToPostResult {\n      __typename\n    }\n    visibility\n    curationEligibleAt\n    mediumUrl\n    shareKey\n    ...ShareButton_post\n    creatorPartnerProgramEnrollmentStatus\n    isNewsletter\n    isPublishToEmail\n  }\n  ","\n"]);return S=function(){return e},e}var R=function(){return c.createElement(m.xu,null,c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:(0,y.Sc)()},"Learn more")," ","about what happens to your post when you publish.")};var O=(0,a.Ps)(S(),d.M),I=(0,a.Ps)(P(),O),w=function(e){var t=e.url,n=e.label;return c.createElement(E.b,{url:t},(function(e){return c.createElement(m.xu,{marginBottom:"8px"},c.createElement(m.zx,{buttonStyle:"SOCIAL",size:"REGULAR",width:"212px",onClick:function(e){return e}},c.createElement(m.xu,{display:"flex",alignItems:"center",justifyContent:"center"},e?"Copied!":n)))}))},_=function(e){var t=e.post,n=e.isUnlisted,r=e.postPath;return c.createElement(m.xu,{display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(g.F,{color:"DARKER",scale:"L",tag:"p"},function(e){return e?"Share your story outside Medium.":"Share your story with the world."}(n)),c.createElement(m.xu,{marginTop:"20px"},!n&&c.createElement(c.Fragment,null,c.createElement(m.xu,{marginBottom:"8px"},c.createElement(d.T,{socialPlatform:"FACEBOOK",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(m.xu,{marginBottom:"8px"},c.createElement(d.T,{socialPlatform:"TWITTER",buttonStyle:"BUTTON_BRANDED",post:t})),c.createElement(m.xu,{marginBottom:"8px"},c.createElement(d.T,{socialPlatform:"LINKEDIN",buttonStyle:"BUTTON_BRANDED",post:t}))),c.createElement(w,{url:r,label:"Copy story link"})))},C=function(e){var t=e.isVisible,n=e.hide,r=e.post,o=r.id,i=r.visibility,s=r.curationEligibleAt,a=r.mediumUrl,l=r.shareKey,p=r.creatorPartnerProgramEnrollmentStatus,d=r.isNewsletter,f=r.isPublishToEmail,E="UNLISTED"===i,x=!!s,P=p===v.iR.ENROLLED,S=(0,u.v9)((function(e){return e.config.productName})),O="Your story is published!";return f?O="Your story has been published and sent!":d&&(O="Your newsletter is on its way!"),c.createElement(m.Vq,{isVisible:t,hide:n,withAnimation:!0,withCloseButton:!1},c.createElement(m.xu,{background:h.ix,borderRadius:"4px",boxShadow:"0 2px 10px ".concat((0,h.Uy)(.15)),position:"relative",width:"900px",textAlign:"center",md:{width:"600px"},sm:{width:"calc(100vw - 128px)"}},c.createElement(m.PZ,{onClick:n,size:"LARGE"}),c.createElement(m.xu,{padding:"56px",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"485px"},c.createElement(m.xu,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},c.createElement(g.F1,{scale:"L",tag:"h3"},O),c.createElement(m.xu,{maxWidth:"520px",marginTop:"20px"},c.createElement(g.F,{color:"DARKER",scale:"L",tag:"p"},function(e,t,n,r,o){return r?function(e,t){return e?"Your email will be delivered to your newsletter subscribers and editors, but will not appear publicly on ".concat(t,"."):c.createElement(c.Fragment,null,"Your subscribers and editors should have it soon. It’ll also show up on ",t," readers’ homepages and Digest emails depending on their interests."," ",c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us/articles/115004682167-How-to-use-Newsletters"},"Learn more"))}(e,o):e?"Your unlisted story will not appear publicly on ".concat(o,", but you can still share it."):n?t?c.createElement(c.Fragment,null,"As a member of the Partner Program, you’ve chosen to make this story eligible to earn money. It will be part of ",o,"’s metered paywall.",c.createElement(R,null)):c.createElement(c.Fragment,null,"You did not choose to make this story eligible to earn money. It will not be part of"," ",o,"’s metered paywall.",c.createElement(R,null)):c.createElement(c.Fragment,null,"This story isn’t currently eligible to earn money. To make this story eligible, join the"," ",o," Partner Program."," ",c.createElement(m.rU,{inline:!0,linkStyle:"OBVIOUS",href:"https://medium.com/earn"},"Learn more."))}(E,x,P,d,S))),c.createElement(m.xu,{paddingTop:"20px"},x&&!E&&a&&l&&c.createElement(w,{url:(0,b.Rk)((0,y.jV)(r),{sk:l}),label:"Copy Friend Link"})),c.createElement(m.xu,{borderBottom:"BASE_LIGHTER",width:"100%",margin:"20px 0"})),o&&a&&c.createElement(_,{post:r,isUnlisted:E,postPath:(0,y.jV)(r)}))))},T=function(e){var t=e.post,n=c.useState(!1),r=o()(n,2),i=r[0],s=r[1];return i?c.createElement(p.Z,null,(function(n){return n&&n.id&&(n.id===(t.creator&&t.creator.id)||t.collection&&t.collection.viewerIsEditor)?c.createElement(l.AE,{ssr:!1,query:I,variables:{postId:t.id}},(function(t){var n=t.loading,r=t.data,o=(r=void 0===r?{}:r).post;if(n||!o||o.inResponseToPostResult)return null;var i={isVisible:e.isVisible,hide:e.hide,post:o};return c.createElement(C,i)})):null})):(f.V6.on("load",(function(){return s(!0)})),null)},k=(0,a.Ps)(x())},15789:(e,t,n)=>{"use strict";n.d(t,{X4:()=>D,Uw:()=>k,ZP:()=>j});var r=n(67154),o=n.n(r),i=n(59713),s=n.n(i),a=n(28655),l=n.n(a),c=n(71439),u=n(80439),p=n(67294),d=n(70561),m=n(25415),g=n(93227),f=n(69677),v=n(72846),h=n(91442),E=n(11642);function b(){var e=l()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return b=function(){return e},e}function y(){var e=l()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return y=function(){return e},e}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t,n){if(!e||"number"!=typeof t||"number"!=typeof n)return null;var r=t,o=n;return e.substr(r,o-r)}var S=(0,c.Ps)(y()),R=(0,c.Ps)(b()),O=n(24087);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(){var e=l()(["\n  query InteractivePostBodyQuery($postId: ID!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return _=function(){return e},e}function C(){var e=l()(["\n  fragment InteractivePostBody_customStyleSheet on CustomStyleSheet {\n    id\n    ...PostBody_customStyleSheet\n  }\n  ","\n"]);return C=function(){return e},e}function T(){var e=l()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that the postMeteringOptions is defined in handlers that use InteractivePostBody\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}var k=(0,c.Ps)(T(),g.iF,h.iB,R,v.Pk,v.v),D=(0,c.Ps)(C(),v.xI),A=(0,c.Ps)(_(),g.UW,h.g8,v.XV,v.w6,S);const j=p.forwardRef((function(e,t){var n=e.activeGrafId,r=e.activeNoteId,i=e.customStyleSheet,a=e.isAuroraPostPageEnabled,l=e.post,c=e.postBodyInserts,b=(0,d.v9)((function(e){return e.client.useNeedForSpeed}),d.wU),y=l.content,S=l.latestPublishedVersion;if(!y)throw new Error("Expected post to have content.");var R={bodyModel:y.bodyModel,creator:l.creator,customStyleSheet:i,isAuroraPostPageEnabled:a,postBodyInserts:c,ref:t,richTextStyle:"FULL_PAGE"},I=l&&l.creator&&l.creator.allowNotes||!1;return y.isLockedPreviewOnly||b?p.createElement(v.ZP,R):p.createElement(u.AE,{notifyOnNetworkStatusChange:!0,ssr:!1,query:A,variables:{postId:l.id,showNotes:I}},(function(e){var t=e.data,i=(t=void 0===t?{}:t).post,a=y.bodyModel&&y.bodyModel.paragraphs,c=function(e,t){return e&&t?e.map((function(e){var n=e.endOffset,r=e.startOffset,o=e.paragraphs&&e.paragraphs[0],i=function(e,t){return e?t.find((function(t){var n=t.name;return e===n})):null}(o.name,t);if(!o||!i)return null;var a=P(o.text,r,n),l=P(i.text,r,n);if(!a||!l)return null;if(a===l)return e;var c=i.text?i.text.indexOf(a):null;return"number"!=typeof c||c<0?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{endOffset:c+a.length,startOffset:c})})).filter(E.b):e}(i&&i.highlights||[],a),u=i&&i.privateNotes||null;return p.createElement(f.yb,null,p.createElement(m.KN,{initialActivePrivateNoteId:r,initialActiveGrafName:n},p.createElement(g.Ms,{interactivePost:w({},l,{latestPublishedVersion:S}),highlights:c},p.createElement(O.Z,{nonBlocking:!0},(function(e){return p.createElement(h.U7,{highlights:c,paragraphs:a,viewer:e},p.createElement(v.ZP,o()({},R,{highlights:c,privateNotes:u})))})))))}))}))},74890:(e,t,n)=>{"use strict";n.d(t,{b:()=>q});var r=n(319),o=n.n(r),i=n(63038),s=n.n(i),a=n(67294),l=n(51176),c=n(14267),u=n(2277),p=n(29355),d=n(58908),m=n(51151),g=n(79956),f=n(59713),v=n.n(f),h=n(79914),E=n(89894),b=n(80735),y=n(28309),x=n(14391),P=n(50993);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return"char"===e&&t>250||"line"===e&&n>5}function I(e){var t=e.paragraphs,n=e.truncateStrategy,r=e.isExpanded,o=(0,y.Iq)(),i=0,s=0,l="none"!==n&&!r;return a.createElement("pre",{className:o({whiteSpace:"pre-wrap"})},t.map((function(e){if(!r&&O(n,i,s))return null;var t=(null==e?void 0:e.text)||"";i+=t.length||0,s+=t.split("\n").length||0;var c=R({},e,{dropCapImage:null,hasDropCap:null}),u=!r&&O(n,i,s);if(u&&"char"===n){var p=250-(i-t.length||0);c.markups=c.markups.reduce((function(e,t){if(t.start<p){var n=R({},t);n.end>p&&(n.end=p),e.push(n)}return e}),[]),c.text=(0,P.N8)(t,p)}return a.createElement(E.xu,{padding:"5px 0px",key:e.name||e.id},a.createElement(b.F,{scale:"M",color:"DARKER"},a.createElement("div",{className:o({lineHeight:"24px"})},a.createElement(h.T2,{paragraph:c,richTextStyle:"FULL_PAGE",paragraphStyle:x.NJ.P}),l&&u&&"...")))})).filter((function(e){return!!e})))}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=a.createElement("path",{d:"M21.27 20.06a9.04 9.04 0 0 0 2.75-6.68C24.02 8.21 19.67 4 14.1 4S4 8.21 4 13.38c0 5.18 4.53 9.39 10.1 9.39 1 0 2-.14 2.95-.41.28.25.6.49.92.7a7.46 7.46 0 0 0 4.19 1.3c.27 0 .5-.13.6-.35a.63.63 0 0 0-.05-.65 8.08 8.08 0 0 1-1.29-2.58 5.42 5.42 0 0 1-.15-.75zm-3.85 1.32l-.08-.28-.4.12a9.72 9.72 0 0 1-2.84.43c-4.96 0-9-3.71-9-8.27 0-4.55 4.04-8.26 9-8.26 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32a5.59 5.59 0 0 0 .21 1.29c.19.7.49 1.4.89 2.08a6.43 6.43 0 0 1-2.67-1.06c-.34-.22-.88-.48-1.16-.74z"});const C=function(e){return a.createElement("svg",w({width:29,height:29},e),_)};var T=n(54260),k=function(e){var t=e.response,n=e.toggleReplyEditing,r=void 0===n?function(){}:n,o=t.postResponses,i=(null==o?void 0:o.count)||0,s=a.useContext(T.H),l=s.isThreadedResponsesVisible,c=s.toggleThreadedResponses,u=(0,y.Iq)();return a.createElement(E.xu,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},a.createElement(E.xu,{display:"flex",alignItems:"center"},a.createElement(p.S,{buttonStyle:"SUBTLE",post:t,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),i>0&&a.createElement(E.xu,{marginLeft:"12px",display:"flex",alignItems:"center",height:"25px"},a.createElement(E.rU,{linkStyle:"SUBTLE",onClick:c},a.createElement(E.xu,{display:"flex",alignItems:"center"},a.createElement(C,{className:u((function(e){return{fill:e.baseColor.fill.normal,height:"25px",width:"25px"}})),"aria-label":"responses"}),a.createElement(E.xu,{tag:"span",display:"inline-block",marginLeft:"8px",marginTop:"2px"},a.createElement(b.F,{tag:"span",scale:"S",color:"DARKER"},function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")}(i,l))))))),a.createElement(E.xu,{paddingRight:"6px"},a.createElement(b.F,{color:"DARKER",scale:"M"},a.createElement(E.rU,{onClick:r,inline:!0},"Reply"))))},D=n(26912),A=n(66893),j=n(36808),L=n(15699),B=n(29035),M=function(){return{border:"none",padding:"0 0 5px",cursor:"pointer"}},N=function(e){var t=e.isLimitedState,n=e.mediumUrl,r=e.simpleResponse;return a.createElement(E.xu,{display:"flex",flexDirection:"row",alignItems:"center",marginTop:"14px"},a.createElement(p.S,{buttonStyle:"SUBTLE",post:r,shouldShowResponsiveLabelText:!0,susiEntry:"respond_sidebar"}),a.createElement(E.xu,{width:"12px"}),a.createElement(E.rU,{href:n+"?responsesOpen=true"},a.createElement(g.h,{location:"response",postId:r.id,responsesCount:r.responsesCount,setIsResponsesSidebarVisible:function(){},allowResponses:r.allowResponses,isLimitedState:t})))},U=function(e){var t,n=e.simpleResponse,r=e.parentPost,o=e.omitBottomBorder,i=e.toggleReplyEditing,l=n.creator,c=n.content,p=n.mediumUrl,g=n.isLimitedState,f=a.useState(!1),v=s()(f,2),h=v[0],x=v[1],P=a.useRef(null),S=(0,y.Iq)(),R=Boolean((0,A.P5)("enable_lite_threaded_responses"));(0,j.Vj)(P,n);var O=null==c||null===(t=c.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(l&&c&&O&&p))return null;var w,_=(w=O.map((function(e){return e.text||""}))).join("").length>320?"char":w.join("\n").split("\n").length>5?"line":"none",C="none"!==_,T=C&&!h,U=(0,B.ic)(navigator&&navigator.userAgent);return a.createElement(L.Z,{post:n,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!C},a.createElement(E.xu,{paddingTop:"25px",paddingBottom:U&&o?"48px":"16px",borderBottom:o?void 0:"BASE_LIGHTER",ref:P},a.createElement(d.E,{response:n,responseType:D.Q.SIMPLE,parentPost:r}),a.createElement(m.J,{inResponseToMediaResource:n.inResponseToMediaResource}),a.createElement(E.xu,{marginTop:"5px"},a.createElement(u.c.Provider,{value:!0},a.createElement(I,{paragraphs:O,truncateStrategy:_,isExpanded:h}))),T&&a.createElement("button",{onClick:function(){return x(!0)},className:S(M)},a.createElement(b.F,{scale:"S",color:"ACCENT",tag:"span"},"Read More")),R?a.createElement(k,{response:n,toggleReplyEditing:i}):a.createElement(N,{isLimitedState:g,mediumUrl:p,simpleResponse:n})))},F=n(26600),H=n(47076),Q=n(27572),V=function(e){var t,n,r=e.simpleResponse,o=e.parentPost,i=e.omitBottomBorder,s=null===(t=r.creator)||void 0===t?void 0:t.name;return s&&(n="Replying to ".concat(s)),a.createElement(E.Bn,null,(function(e){var t=e.isVisible,s=e.hide,l=e.toggle;return a.createElement(a.Fragment,null,a.createElement(U,{simpleResponse:r,parentPost:o,omitBottomBorder:i,toggleReplyEditing:l}),t&&a.createElement(Q.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},a.createElement(F.z,null,a.createElement(H.Z,{parentPostId:r.id,hideReplyEditing:s,placeholder:n,showEditorHeader:!1}))))}))},W=n(34430),$=n(19537),z=n(59070),q=function(e){var t,n,r=e.responsePost,i=e.index,u=e.parentPost,p=e.omitBottomBorder,d=Boolean((0,A.P5)("enable_lite_threaded_responses")),m=a.useState(!1),g=s()(m,2),f=g[0],v=g[1],h=a.useState(null),E=s()(h,2),b=E[0],y=E[1],x=a.useContext(c.D),P=x.editingResponsesAtIndices,S=x.setEditingResponsesAtIndices;return a.useEffect((function(){if(f&&!P.includes(i)&&S([].concat(o()(P),[i])),!f&&P.includes(i)){var e=P.filter((function(e){return e!==i}));S(e)}}),[f,P,S]),r?f?a.createElement(l.Q.Provider,{value:{isEditing:f,setIsEditing:v,latestRev:null==r?void 0:r.latestRev,createdAt:null==r?void 0:r.createdAt,setEditingQuote:y,editingQuote:b}},a.createElement(Q.cW,{source:{index:i},key:r.id,extendSource:!0},d?a.createElement(z.O,{type:$.H.edit,parentPostId:u.id,responseId:r.id,initialValue:null==r||null===(t=r.content)||void 0===t?void 0:t.bodyModel}):a.createElement(W.x,{type:$.H.edit,parentPostId:u.id,responseId:r.id,initialValue:null==r||null===(n=r.content)||void 0===n?void 0:n.bodyModel}))):a.createElement(l.Q.Provider,{value:{isEditing:f,setIsEditing:v,setEditingQuote:y,editingQuote:b}},a.createElement(Q.cW,{source:{index:i},key:r.id,extendSource:!0},d?a.createElement(V,{parentPost:u,simpleResponse:r,omitBottomBorder:p}):a.createElement(U,{parentPost:u,simpleResponse:r,omitBottomBorder:p}))):null}},51176:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=n(67294).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},58908:(e,t,n)=>{"use strict";n.d(t,{E:()=>ue});var r=n(63038),o=n.n(r),i=n(67294),s=n(70561),a=n(24548),l=n(28309),c=function(e){var t=e.title,n=e.backgroundColor,r=(0,l.Iq)();return i.createElement("div",{className:r((function(){return{color:"white",backgroundColor:n,borderRadius:"2px",fontSize:"11px",padding:"0px 6px",height:"16px",display:"flex",alignItems:"center",marginLeft:"8px"}}))},t)},u=n(66893),p=n(9785),d=n(98281),m=n(89894),g=n(80735),f=n(27572),v=n(93394),h=n(27952),E=n(59713),b=n.n(E),y=n(28655),x=n.n(y),P=n(46829),S=n(71439),R=n(2074),O=n(43522),I=n(54260);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!(null==r?void 0:r.responsesConnection)||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,i=o.filter((function(e){var n;return(null===(n=e.itemType.post)||void 0===n?void 0:n.id)!==t}));return i.length===o.length?null:Object.assign({},e,{post:_({},e.post,{postResponses:_({},r,{count:r.count-1,responsesConnection:_({},r.responsesConnection,{stream:i})})})})},T=n(32262),k=n(62630),D=n(88914);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(){var e=x()(["\n  mutation DeleteResponseMutation($responseId: ID!) {\n    deletePost(targetPostId: $responseId)\n  }\n"]);return L=function(){return e},e}var B=(0,S.Ps)(L()),M=function(e){var t,n=e.response,r=e.parentPostId,a=e.hidePopoverMenu,l=i.useState(!1),c=o()(l,2),d=c[0],v=c[1],h=(0,k.Av)(),E=(0,f.pK)(),b=(0,s.I0)(),y=(0,p.YC)().value,x=Boolean((0,u.P5)("enable_lite_threaded_responses")),S=i.useContext(I.H).inResponseToPostId,w=(0,P.useMutation)(B,{variables:{responseId:n.id},update:function(e){var t,o,i={postId:r,postResponsesPaging:{limit:10}};if(x){if(null===(o=function(e,t){var n,r,o=e;return o?_({},o,{postResponses:{count:((null===(n=o.postResponses)||void 0===n?void 0:n.count)||1)-1},threadedPostResponses:_({},o.threadedPostResponses,{posts:((null===(r=o.threadedPostResponses)||void 0===r?void 0:r.posts)||[]).filter((function(e){return e.id!==t}))})}):null}(e.readFragment({id:"Post:".concat(S),fragment:O.K5,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}),n.id)))return;e.writeFragment({id:"Post:".concat(S),fragment:O.K5,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:j({},o)})}else{if(t=e.readQuery({query:R.gl,variables:i}),null===(o=C(t,n.id)))return;e.writeQuery({query:R.gl,data:o,variables:i})}h.event("responses.removed",{postId:n.id,source:E}),b((0,D.Dx)({message:"Successfully deleted response."})),a()}}),A=o()(w,1)[0];return(null==y?void 0:y.id)&&(null==y?void 0:y.id)===(null===(t=n.creator)||void 0===t?void 0:t.id)?i.createElement(i.Fragment,null,i.createElement(T.Sl,null,i.createElement(m.rU,{onClick:function(){return v(!0)}},"Delete")),d&&i.createElement(m.Vq,{isVisible:d,hide:function(){return v(!1)},withCloseButton:!1,noPortal:!0,padding:50},i.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},i.createElement(g.X6,{scale:"M"},"Delete"),i.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},i.createElement(g.F,{scale:"M",color:"DARKER"},"Deleted responses are gone forever.",i.createElement("br",null),"Are you sure?")),i.createElement(m.xu,{display:"flex",marginBottom:"20px"},i.createElement(m.rU,{onClick:function(){return v(!1)}},i.createElement(g.F,{scale:"M",color:"DARKER"},"Cancel")),i.createElement(m.xu,{marginLeft:"25px"},i.createElement(m.zx,{buttonStyle:"ERROR",onClick:A,"data-test-id":"close-discussion-button"},"Delete Response")))))):null},N=n(26912),U=n(6688),F=n(18970);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(){var e=x()(["\n  mutation UserBlockMutation($targetUserId: ID!, $userId: ID!) {\n    blockUser(userId: $userId, targetUserId: $targetUserId) {\n      id\n      isBlocking\n    }\n  }\n"]);return V=function(){return e},e}var W=(0,S.Ps)(V()),$=function(e){var t,n,r=e.response,a=e.parentPost,l=e.hidePopoverMenu,c=(0,p.YC)().value,u=(0,k.Av)(),d=(0,f.pK)(),g=(0,s.I0)(),v=i.useState(!1),h=o()(v,2),E=h[0],b=h[1],y=function(){return b(!1)},x=null==r||null===(t=r.creator)||void 0===t?void 0:t.id,S=(0,P.useMutation)(W,{variables:{targetUserId:x,userId:null==c?void 0:c.id},update:function(e){var t={postId:a.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:R.gl,variables:t}),r=z(n,x);null!==r&&e.writeQuery({query:R.gl,data:r,variables:t})},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:x,isBlocking:!0}},onCompleted:function(){y(),g((0,D.Dx)({message:"Responses by this user have been hidden from this story."}))}}),O=o()(S,1)[0],I=null===(n=a.creator)||void 0===n?void 0:n.id,w=(null==c?void 0:c.id)===I;return(null==c?void 0:c.id)===x?null:c&&x&&w?i.createElement(i.Fragment,null,i.createElement(T.Sl,null,i.createElement(m.rU,{onClick:function(){b(!0)}},"Block this author")),E&&i.createElement(F.Z,{onConfirm:function(){u.event("user.blocked",{userId:x,source:d}),O()},isVisible:E,isInResponsesSidebar:!0,hide:function(){y(),l()}})):null},z=function(e,t){var n,r=null==e||null===(n=e.post)||void 0===n?void 0:n.postResponses;if(!e||!t||!(null==r?void 0:r.responsesConnection)||null===(null==r?void 0:r.count))return null;var o=r.responsesConnection.stream,i=o.filter((function(e){var n,r;return(null===(n=e.itemType.post)||void 0===n||null===(r=n.creator)||void 0===r?void 0:r.id)!==t}));if(i.length===o.length)return null;var s=o.length-i.length;return Q({},e,{post:Q({},e.post,{postResponses:Q({},r,{count:r.count-s,responsesConnection:Q({},r.responsesConnection,{stream:i})})})})},q=n(51176),Y=function(e){var t,n=e.response,r=(0,p.YC)().value,o=i.useContext(q.Q),s=o.setIsEditing,a=o.isEditing,l=o.setEditingQuote;return(null===(t=n.creator)||void 0===t?void 0:t.id)===(null==r?void 0:r.id)?i.createElement(T.Sl,null,i.createElement(m.rU,{onClick:function(){n.inResponseToMediaResource&&l(n.inResponseToMediaResource.mediumQuote),s(!a)}},"Edit this response")):null};function Z(){var e=x()(["\n  mutation HidePostResponseOnParentMutation($parentPostId: ID!, $postResponseId: ID!) {\n    hidePostResponseOnParentPost(parentPostId: $parentPostId, postResponseId: $postResponseId)\n  }\n"]);return Z=function(){return e},e}var G=(0,S.Ps)(Z()),K=function(e){var t,n,r,a=e.responseToBeHidden,l=e.parentPost,c=e.hidePopoverMenu,u=(0,p.YC)().value,d=(0,s.I0)(),g=(0,k.Av)(),v=(0,f.pK)(),h=(null==u?void 0:u.id)===(null===(t=l.creator)||void 0===t?void 0:t.id),E=null==l||null===(n=l.collection)||void 0===n?void 0:n.viewerIsEditor,b=(null==u?void 0:u.id)===(null===(r=a.creator)||void 0===r?void 0:r.id),y=(0,P.useMutation)(G,{variables:{postResponseId:a.id,parentPostId:l.id},update:function(e){var t={postId:l.id,postResponsesPaging:{limit:10}},n=e.readQuery({query:R.gl,variables:t}),r=C(n,a.id);null!==r&&(e.writeQuery({query:R.gl,data:r,variables:t}),g.event("response.hidden",{postId:a.id,source:v}),d((0,D.Dx)({message:"",toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:a.id,parentPostId:l.id}})),c())}}),x=o()(y,1)[0];return b?null:h||E?i.createElement(T.Sl,null,i.createElement(m.rU,{onClick:x},"Hide this response")):null};function X(){var e=x()(["\n  mutation UserReportStoryMutation(\n    $targetPostId: ID!\n    $targetAuthorId: ID!\n    $alsoBlockAuthor: Boolean!\n    $reason: String!\n  ) {\n    reportStoryAndMaybeBlockAuthor(\n      targetPostId: $targetPostId\n      targetAuthorId: $targetAuthorId\n      alsoBlockAuthor: $alsoBlockAuthor\n      reason: $reason\n    ) {\n      id\n      isBlocking\n    }\n  }\n"]);return X=function(){return e},e}var J=(0,S.Ps)(X()),ee=n(62181),te=n(90639),ne=function(e){var t,n=e.response,r=e.parentPost,a=e.hidePopoverMenu,l=(0,p.YC)().value,c=(0,k.Av)(),u=(0,f.pK)(),d=i.useState(!1),g=o()(d,2),v=g[0],h=g[1],E=function(e){var t,n,r=e.response,a=r.id,l=null===(t=r.creator)||void 0===t?void 0:t.id,c=null===(n=r.creator)||void 0===n?void 0:n.isBlocking,u=(0,s.I0)(),p=(0,P.useMutation)(J,{variables:{targetPostId:a,targetAuthorId:l,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){u((0,D.Dx)({message:"Successfully reported post."}))}}),d=o()(p,2),m=d[0],g=d[1];return{reportStory:i.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return m({variables:{targetPostId:a,targetAuthorId:l,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:l,isBlocking:c||n}}})}),[r,m]),error:null==g?void 0:g.error,loading:null==g?void 0:g.loading}}({response:n}).reportStory,b=(null==l?void 0:l.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);return!n.creator||b?null:i.createElement(i.Fragment,null,i.createElement(T.Sl,null,(null==l?void 0:l.id)?i.createElement(m.rU,{onClick:function(){return h(!0)}},"Report this response"):i.createElement(ee.R9,{operation:"register",post:r,susiEntry:"respond_sidebar"},"Report this response")),i.createElement(te.Z,{onSubmit:function(e,t){return c.event("response.flagged",{postId:n.id,reason:t,source:u}),E({alsoBlockAuthor:e,reportReason:t})},isVisible:v,hide:function(){h(!1),a()},isResponse:!0}))},re=n(965),oe=n(16811),ie=n(55573),se=function(e){var t=e.response,n=e.hidePopoverMenu,r=(0,re.CP)(),o=(0,k.Av)(),a=(0,p.YC)().value,l=(0,f.pK)(),c=(0,s.v9)((function(e){return e.multiVote.clapsPerPost})),u=(0,s.I0)(),d=i.useCallback((function(e){return u((0,oe.at)(e))}),[u]),g=(0,ie.l)(c,t),v=g.clapCount,h=g.viewerClapCount;return(null==a?void 0:a.id)&&0!==v&&0!==h?i.createElement(T.Sl,null,i.createElement(m.rU,{onClick:function(){r(t,(null==a?void 0:a.id)||"",-h),d({postId:t.id,clapCount:v-h,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),o.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:h,source:l}),n()}},"Undo applause for this response")):null},ae={position:"absolute !important",top:"-16px",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"150px"},le=function(e){var t=e.response,n=e.responseType,r=e.parentPost,o=e.isPopoverMenuVisible,s=e.hidePopoverMenu,a=(0,U.I)(),l=Boolean((0,u.P5)("enable_responses_moderation")),c=t.creator,p=Boolean((0,u.P5)("enable_responses_edit_and_delete")),d=i.useRef(null);return i.useEffect((function(){var e=function(e){var t;(null==d||null===(t=d.current)||void 0===t?void 0:t.contains(e.target))||s()};if(o)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[o]),t&&c?i.createElement("div",{className:a(ae),ref:d},i.createElement(T.mX,null,i.createElement(i.Fragment,null,i.createElement(ne,{response:t,parentPost:r,hidePopoverMenu:s}),l&&i.createElement(i.Fragment,null,i.createElement(K,{responseToBeHidden:t,parentPost:r,hidePopoverMenu:s}),i.createElement($,{response:t,parentPost:r,hidePopoverMenu:s})),n===N.Q.SIMPLE&&i.createElement(se,{response:t,hidePopoverMenu:s})),p&&i.createElement(i.Fragment,null,n===N.Q.SIMPLE&&i.createElement(Y,{response:t}),i.createElement(M,{response:t,hidePopoverMenu:s,parentPostId:r.id})))):null},ce=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},ue=function(e){var t,n=e.response,r=e.responseType,E=e.parentPost,b=(0,p.YC)().value,y=(0,l.Iq)(),x=(0,l.Fg)(),P=n.creator,S=n.mediumUrl,R=n.createdAt,O=i.useState(!1),I=o()(O,2),w=I[0],_=I[1],C=Boolean((0,u.P5)("enable_responses_edit_and_delete")),T=Boolean((0,u.P5)("enable_lite_threaded_responses")),k=(0,s.v9)((function(e){return e.config.authDomain}));if(!n||!P||!S)return null;var D=(null===(t=E.creator)||void 0===t?void 0:t.id)===P.id,A=(null==b?void 0:b.id)===P.id,j=!!C||!A,L=C&&function(e,t){return e&&t===N.Q.SIMPLE}(n,r)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt);return i.createElement(i.Fragment,null,i.createElement(m.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between"},i.createElement(m.xu,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(d.ZP,{scale:"XS",user:P}),i.createElement(m.xu,{paddingLeft:"12px"},i.createElement(m.xu,{display:"flex",flexDirection:"row"},i.createElement(m.rU,{href:(0,h.AW)(P.username||"",k,P.hasDomain)},i.createElement(g.F,{scale:"M",color:"DARKER"},P.name)),D?i.createElement(c,{title:"AUTHOR",backgroundColor:x.brandColor.sage.dark}):A&&T?i.createElement(c,{title:"YOU",backgroundColor:"#A8A8A8"}):null),i.createElement(m.rU,{href:S,linkStyle:"SUBTLE",inline:!0,noFollow:!0},i.createElement(g.F,{scale:"M"},i.createElement(a.Z,{timestamp:R}),L&&i.createElement(i.Fragment,null," (edited)"))))),j&&i.createElement(m.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),_(!w)},inline:!0,className:y(ce)},i.createElement(v.Z,null))),w&&i.createElement("div",{className:y({position:"relative"})},i.createElement(f.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},i.createElement(le,{response:n,responseType:r,parentPost:E,isPopoverMenuVisible:w,hidePopoverMenu:function(){return _(!1)}}))))}},13787:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var r=n(28655),o=n.n(r),i=n(71439),s=n(98281);function a(){var e=o()(["\n  fragment ResponseHeader_post on Post {\n    createdAt\n    creator {\n      ...UserAvatar_user\n      isBlocking\n    }\n    mediumUrl\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),s.WQ)},73185:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var r=n(67294),o=n(89894),i=n(28309),s={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},a=function(){var e=(0,i.om)({shimmerKeyframesName:s}).shimmerKeyframesName,t=(0,i.Iq)();return r.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},r.createElement(o.xu,{display:"flex",flexDirection:"row"},r.createElement(o.xu,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{marginLeft:"8px",marginTop:"4px"},r.createElement(o.xu,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),r.createElement(o.xu,{marginTop:"12px"},r.createElement(o.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.xu,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))}},51151:(e,t,n)=>{"use strict";n.d(t,{J:()=>h,u:()=>E});var r=n(28655),o=n.n(r),i=n(59713),s=n.n(i),a=n(71439),l=n(67294),c=n(19692),u=n(28309),p=n(14391),d=n(49920),m=n(83024);function g(){var e=o()(["\n  fragment ResponseQuote_post on Post {\n    inResponseToMediaResource {\n      href\n      mediumQuote {\n        quoteId\n        startOffset\n        endOffset\n        paragraphs {\n          ...TextParagraph_paragraph\n        }\n        ...buildQuotePreviewParagraph_quote\n      }\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.inResponseToMediaResource,n=(0,u.Iq)(),r=(0,u.Fg)(),o=(0,d.r)((function(e){e.preventDefault();var n=null==t?void 0:t.href;if(n){var r=null==n?void 0:n.split("#")[1];if(r){var o=r.split("--")[0];if(o){var i=document.getElementById(o);if(i){var s=(null==i?void 0:i.offsetTop)-100;s&&window.scrollTo({top:s,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]),i=null==t?void 0:t.mediumQuote;if(!i)return null;var s=(0,m.eu)(i);if(!s||!s.type)return null;var a=s.type;return a===p.NJ.IMG||a===p.NJ.IFRAME||a===p.NJ.COVER_TITLE||a===p.NJ.HR||a===p.NJ.MIXTAPE_EMBED||a===p.NJ.SECTION_CAPTION?null:l.createElement("div",{onClick:o,onKeyDown:o,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},l.createElement(c.ZP,{paragraph:v({},s,{name:"embedded-quote-".concat(i.quoteId,"-").concat(s.name)}),paragraphStyle:a,spaceTop:4,richTextStyle:"STREAM"}))},E=(0,a.Ps)(g(),m.Sz,c.Rg)},14267:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var r=n(67294).createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},setInResponseToQuote:function(){return null}})},33698:(e,t,n)=>{"use strict";n.d(t,{FP:()=>V,ZR:()=>U});var r,o,i=n(319),s=n.n(i),a=n(63038),l=n.n(a),c=n(59713),u=n.n(c),p=n(46829),d=n(67294),m=n(70561),g=n(74890),f=n(73185),v=n(14267),h=n(20860),E=n(34430),b=n(43238),y=n(1036),x=n(24087),P=n(32262),S=n(89894),R=n(3149),O=n(80735),I=n(27572),w=n(28309),_=n(80087);!function(e){e.StoryResponse="StreamItemPostStoryResponse",e.SimpleResponse="StreamItemPostSimpleResponse"}(r||(r={})),function(e){e.Recommended="Recommended",e.Oldest="Oldest",e.Newest="Newest"}(o||(o={}));var C=[o.Recommended,o.Newest,o.Oldest],T={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},k=function(e,t,n){return{backgroundColor:e&&e.id&&e.id===(t&&t.id)?n.highlightColor.light:void 0,padding:"0 24px"}},D=function(e){var t,n,i,s=e.responses,a=e.parentPost,c=e.responsesLocked,u=e.isLockedResponse,p=e.isLoadingInitialContent,D=e.isFetchingNextSetOfResponses,A=e.isResponsesSidebarVisible,j=e.setIsResponsesSidebarVisible,L=e.inResponseToQuote,B=e.setInResponseToQuote,M=(0,w.Iq)(),N=(0,w.Fg)(),F=(0,m.v9)((function(e){return e.client.useNeedForSpeed}),m.wU),H=d.useState(o.Recommended),Q=l()(H,2),V=Q[0],W=Q[1],$=d.useState(!1),z=l()($,2),q=z[0],Y=z[1],Z=d.useState([]),G=l()(Z,2),K=G[0],X=G[1],J=a.id,ee=(null==s?void 0:s.count)&&0!==(null==s?void 0:s.count)?"(".concat(null==s?void 0:s.count,")"):"",te=null==s||null===(t=s.responsesConnection)||void 0===t?void 0:t.stream,ne=null==s||null===(n=s.responsesConnection)||void 0===n||null===(i=n.pagingInfo)||void 0===i?void 0:i.next,re=te&&s&&s.count&&(null==te?void 0:te.length)<(null==s?void 0:s.count)-1,oe=D&&ne&&re;return d.createElement(v.D.Provider,{value:{setIsSavingResponse:Y,responsesLocked:c,isLockedResponse:u,editingResponsesAtIndices:K,setEditingResponsesAtIndices:X,inResponseToQuote:L,setInResponseToQuote:B}},A&&q&&d.createElement(S.TF,{horizontalOverride:{left:"calc(100vw - ".concat(U,")")}}),d.createElement(S.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},d.createElement(O.X6,{scale:"S"},"Responses ",ee),d.createElement(S.xu,{display:"flex",flexDirection:"row"},d.createElement(b.c,{parentPost:a,responsesLocked:c}),d.createElement(S.xu,{position:"relative",right:"-7px"},d.createElement(R.Z,{onClick:function(){return j(!1)},size:"REGULAR",isPositionAbsolute:!1})))),p?d.createElement(S.xu,{padding:"0 24px"},d.createElement(f.j,null)):d.createElement(d.Fragment,null,!F||A?d.createElement(E.x,{parentPostId:J}):null,d.createElement(y.Z,{name:"enable_responses_sortby"},d.createElement(S.Bn,{initialVisibility:!0},(function(e){var t=e.isVisible,n=e.toggle,r=e.hide;return d.createElement(S.xu,{backgroundColor:"BASE_LIGHT",padding:"10px 24px"},d.createElement(S.J2,{isVisible:t,hide:r,customZIndex:530,popoverRenderFn:function(){return d.createElement(P.mX,null,C.map((function(e){return d.createElement(P.Sl,null,d.createElement(S.rU,{linkStyle:"SUBTLE",onClick:function(){!function(e){W(e)}(e),r()}},e))})))}},d.createElement(S.rU,{onClick:n},V,d.createElement(_.Z,{className:M({margin:"0px 5px"})}))))}))),s&&0!==(null==te?void 0:te.length)?d.createElement(x.Z,null,(function(e){return d.createElement(S.xu,null,null==te?void 0:te.map((function(t,n){var o=t.itemType.__typename,i=K.includes(n+1),s=te.length-1===n;switch(o){case r.SimpleResponse:var l=t.itemType;return l.post?d.createElement("div",{key:l.post.id,className:M(k(e,l.post.creator,N))},d.createElement(g.b,{responsePost:l.post,index:n,parentPost:a,omitBottomBorder:i||s})):null;case r.StoryResponse:var c=t.itemType;return c.post?d.createElement(I.cW,{source:{index:n},key:c.post.id,extendSource:!0},d.createElement("div",{className:M(k(e,c.post.creator,N))},d.createElement(h.H,{storyResponse:c.post,parentPost:a,omitBottomBorder:i||s}))):null;default:return null}})),oe&&d.createElement(f.j,null))})):d.createElement("div",{className:M(T)},d.createElement(O.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),d.createElement(O.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},A=n(2074),j=n(89714),L=n(80637);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){return{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",pointerEvents:"none"}},U="414px",F=function(e){return u()({width:U,position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,L.sm)(e),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"})},H=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},Q=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},V=function(e){var t,n,r,o,i,s=e.setIsResponsesSidebarVisible,a=e.isResponsesSidebarVisible,c=e.inResponseToQuote,u=e.setInResponseToQuote,g=e.parentPost,f=(0,j.Uo)().baseTheme,v=(0,w.Iq)(),h=(0,m.v9)((function(e){return e.client.useNeedForSpeed}),m.wU),E=(0,p.useLazyQuery)(A.gl,{variables:{postId:g.id,postResponsesPaging:{limit:10}},ssr:!1}),b=l()(E,2),y=b[0],x=b[1],P=x.called,R=x.loading,O=x.data,_=x.fetchMore;P||h&&!a||y();var C,T=null==O||null===(t=O.post)||void 0===t?void 0:t.responsesLocked,k=null==O||null===(n=O.post)||void 0===n?void 0:n.isLockedResponse,L=null==O||null===(r=O.post)||void 0===r?void 0:r.postResponses,B=d.useState(0),M=l()(B,2),U=M[0],V=M[1],z=d.useState(!1),q=l()(z,2),Y=q[0],Z=q[1];d.useEffect((function(){U||V(window.innerWidth)}),[]);var G=null==L||null===(o=L.responsesConnection)||void 0===o||null===(i=o.pagingInfo)||void 0===i?void 0:i.next;if(G){var K={postId:g.id,postResponsesPaging:{limit:G.limit,to:G.to}};C=function(){return _({variables:K,updateQuery:function(e,t){var n=t.fetchMoreResult;return Z(!1),$(e,n)}})}}return d.createElement(S.f6,{theme:f},d.createElement(I.cW,{source:{name:"responses",postId:g.id},extendSource:!0},d.createElement(S.xu,{print:{display:"none"}},d.createElement("div",{className:v([N,Q(a)]),onClick:function(){s(!1)},"aria-hidden":!a}),d.createElement("div",{className:v([F,H(a,U)]),"aria-hidden":!a,onScroll:function(e){return W(e,G,Y,Z,C)}},d.createElement(D,{responses:L,parentPost:g,responsesLocked:T,isLockedResponse:k,isLoadingInitialContent:R,isFetchingNextSetOfResponses:Y,isResponsesSidebarVisible:a,setIsResponsesSidebarVisible:s,inResponseToQuote:c,setInResponseToQuote:u})))))},W=function(e,t,n,r,o){e.preventDefault();var i=e.currentTarget;i.scrollHeight-i.scrollTop-i.clientHeight<1.5*i.clientHeight&&t&&!n&&(r(!0),o())},$=function(e,t){var n,r,o,i,a,l,c,u,p=null==t||null===(n=t.post)||void 0===n?void 0:n.postResponses,d=null==t?void 0:t.post;if(!d||!p||!(null===(r=p.responsesConnection)||void 0===r?void 0:r.stream))return e;var m=(null==e||null===(o=e.post)||void 0===o||null===(i=o.postResponses)||void 0===i||null===(a=i.responsesConnection)||void 0===a?void 0:a.stream)||[],g=(null==t||null===(l=t.post)||void 0===l||null===(c=l.postResponses)||void 0===c||null===(u=c.responsesConnection)||void 0===u?void 0:u.stream)||[];return{post:M({},d,{postResponses:M({},p,{responsesConnection:M({},p.responsesConnection,{stream:[].concat(s()(m),s()(g))})})})}}},2074:(e,t,n)=>{"use strict";n.d(t,{Ag:()=>b,gl:()=>E});var r=n(28655),o=n.n(r),i=n(71439),s=n(8011),a=n(43522),l=n(15699),c=n(13787),u=n(51151);function p(){var e=o()(["\n  fragment StoryResponse_storyResponse on StreamItemPostStoryResponse {\n    post {\n      ...ResponseHeader_post\n      ...ResponseQuote_post\n      id\n      responsesCount\n      creator {\n        isBlocking\n        hasDomain\n      }\n      clapCount\n      ...PostPresentationTracker_post\n      previewContent {\n        bodyModel {\n          paragraphs {\n            text\n            type\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var d=(0,i.Ps)(p(),c.F,l.h,u.u),m=n(58992),g=n(31078);function f(){var e=o()(["\n  query PagedThreadedPostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      responsesCount\n      postResponses {\n        count\n      }\n      threadedPostResponses(paging: $postResponsesPaging) {\n        __typename\n        pagingInfo {\n          next {\n            limit\n            to\n          }\n        }\n        posts {\n          ... on Post {\n            ...StoryResponse_threadedStoryResponse_post\n            ...SimpleResponse_threadedSimpleResponse_post\n            ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}function v(){var e=o()(["\n  query ThreadedPostResponsesQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      prototypeNestedResponses {\n        __typename\n        ... on Post {\n          ...StoryResponse_threadedStoryResponse\n        }\n        ... on Post {\n          ...SimpleResponse_threadedSimpleResponse\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function h(){var e=o()(['\n  query PostResponsesQuery($postId: ID!, $postResponsesPaging: PagingOptions) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n      postResponses {\n        count\n        responsesConnection(paging: $postResponsesPaging) @connection(key: "responsesConnection") {\n          pagingInfo {\n            next {\n              limit\n              to\n            }\n          }\n          stream {\n            itemType {\n              __typename\n              ... on StreamItemPostStoryResponse {\n                ...StoryResponse_storyResponse\n              }\n              ... on StreamItemPostSimpleResponse {\n                ...SimpleResponse_simpleResponse\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n  ","\n"]);return h=function(){return e},e}var E=(0,i.Ps)(h(),g.Z,d,s.y),b=((0,i.Ps)(v(),g.Z,m.c,a.p1),(0,i.Ps)(f(),g.Z,a.Df,m.t,a.K5))},8011:(e,t,n)=>{"use strict";n.d(t,{y:()=>u});var r=n(28655),o=n.n(r),i=n(71439),s=n(5399),a=n(51151),l=n(36808);function c(){var e=o()(["\n  fragment SimpleResponse_simpleResponse on StreamItemPostSimpleResponse {\n    post {\n      id\n      createdAt\n      firstPublishedAt\n      latestPublishedAt\n      title\n      creator {\n        id\n        name\n        username\n        imageId\n        mediumMemberAt\n        isBlocking\n        hasDomain\n      }\n      clapCount\n      viewerClapCount\n      isPublished\n      voterCount\n      responsesCount\n      allowResponses\n      latestRev\n      recommenders {\n        id\n        name\n      }\n      mediumUrl\n      content {\n        bodyModel {\n          paragraphs {\n            text\n          }\n          ...getSlateBodyFromPostBodyModel_bodyModel\n        }\n      }\n      collection {\n        id\n        slug\n      }\n      isLimitedState\n      ...PostPresentationTracker_post\n      ...PostScrollTracker_post\n      ...ResponseQuote_post\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var u=(0,i.Ps)(c(),l.h_,l.kH,a.u,s.I)},43522:(e,t,n)=>{"use strict";n.d(t,{Df:()=>m,K5:()=>g,p1:()=>f});var r=n(28655),o=n.n(r),i=n(71439),s=n(5399),a=n(51151),l=n(36808),c=n(58992);function u(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse on Post {\n    prototypeNestedResponses {\n      # 1\n      prototypeNestedResponses {\n        # 2\n        prototypeNestedResponses {\n          # 3\n          prototypeNestedResponses {\n            # 4\n            ...SimpleResponse_threadedSimpleResponse_post\n          }\n          ...SimpleResponse_threadedSimpleResponse_post\n        }\n        ...SimpleResponse_threadedSimpleResponse_post\n      }\n      ...SimpleResponse_threadedSimpleResponse_post\n    }\n    ...SimpleResponse_threadedSimpleResponse_post\n  }\n  ","\n"]);return u=function(){return e},e}function p(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse_defaultPostResponses on Post {\n    responsesCount\n    postResponses {\n      count\n    }\n    threadedPostResponses(paging: {limit: 10}) {\n      __typename\n      pagingInfo {\n        next {\n          limit\n          to\n        }\n      }\n      posts {\n        ... on Post {\n          ...StoryResponse_threadedStoryResponse_post\n          ...SimpleResponse_threadedSimpleResponse_post\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function d(){var e=o()(["\n  fragment SimpleResponse_threadedSimpleResponse_post on Post {\n    id\n    createdAt\n    firstPublishedAt\n    latestPublishedAt\n    title\n    creator {\n      id\n      name\n      username\n      imageId\n      mediumMemberAt\n      isBlocking\n      hasDomain\n    }\n    clapCount\n    viewerClapCount\n    isPublished\n    voterCount\n    responsesCount\n    postResponses {\n      count\n    }\n    allowResponses\n    latestRev\n    recommenders {\n      id\n      name\n    }\n    mediumUrl\n    content {\n      bodyModel {\n        paragraphs {\n          text\n        }\n        ...getSlateBodyFromPostBodyModel_bodyModel\n      }\n    }\n    collection {\n      id\n      slug\n    }\n    isLimitedState\n    inResponseToType\n    ...PostPresentationTracker_post\n    ...PostScrollTracker_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return d=function(){return e},e}var m=(0,i.Ps)(d(),l.h_,l.kH,a.u,s.I),g=(0,i.Ps)(p(),c.t,m),f=(0,i.Ps)(u(),m)},20860:(e,t,n)=>{"use strict";n.d(t,{H:()=>h});var r=n(67294),o=n(89894),i=n(80735),s=n(28309),a=n(15699),l=n(14391),c=n(81162),u=n(14349),p=n(27390),d=n(27952),m=n(58908),g=n(51151),f=n(26912),v=function(e){return{fill:e.baseColor.fill.lighter,float:"right"}},h=function(e){var t,n,h=e.storyResponse,E=e.parentPost,b=e.omitBottomBorder,y=(0,s.Iq)(),x=(0,s.Fg)(),P=h.creator,S=h.previewContent,R=h.mediumUrl,O=h.clapCount,I=h.responsesCount,w=null==S||null===(t=S.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(P&&S&&S.bodyModel&&R&&w))return null;var _=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(a.text&&(t.push(a),t.length>=2))break}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return{title:t[0],subtitle:t[1]}}(w);if(!_.title&&!_.subtitle)return null;var C,T=null!==(null===(n=h.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),k=I||0;return r.createElement(a.Z,{post:h,presentationContext:"POST_PREVIEW",isDisplayingFullPost:!1},r.createElement(o.xu,{paddingTop:"25px",paddingBottom:"20px",borderBottom:b?void 0:"BASE_LIGHTER"},r.createElement(m.E,{response:h,responseType:f.Q.STORY,parentPost:E}),r.createElement(g.J,{inResponseToMediaResource:h.inResponseToMediaResource}),r.createElement(o.P3,{href:(0,d.jV)(h)},r.createElement("div",{className:y({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:T?"12px":"16px",backgroundColor:x.backgroundColor})},r.createElement("div",{className:y(v)},r.createElement(i.F,{scale:"S",color:"LIGHTER"},r.createElement(o.xu,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:O>0||k>0?"20px":"0"},O>0?r.createElement(o.xu,{display:"flex",alignItems:"center"},r.createElement(o.xu,{tag:c.Z,marginRight:"2px"}),r.createElement("div",null,(0,p.pY)(O))):null,k>0?r.createElement(o.xu,{display:"flex",alignItems:"center"},r.createElement(o.xu,{tag:u.Z,marginLeft:O?"8px":"0",marginRight:"2px"}),r.createElement("div",null,(0,p.pY)(k))):null))),r.createElement(i.F,{scale:"M",clamp:2,color:"DARKER"},_.title&&r.createElement(o.xu,null,_.title.text),_.subtitle&&r.createElement("div",{className:y((C=_.title.type,function(e){return{color:C===l.NJ.H3?e.baseColor.text.lighter:e.baseColor.text.normal}}))},_.subtitle.text))))))}},58992:(e,t,n)=>{"use strict";n.d(t,{t:()=>p,c:()=>d});var r=n(28655),o=n.n(r),i=n(71439),s=n(15699),a=n(13787),l=n(51151);function c(){var e=o()(["\n  fragment StoryResponse_threadedStoryResponse on Post {\n    prototypeNestedResponses {\n      # 1\n      prototypeNestedResponses {\n        # 2\n        prototypeNestedResponses {\n          # 3\n          prototypeNestedResponses {\n            # 4\n            ...StoryResponse_threadedStoryResponse_post\n          }\n          ...StoryResponse_threadedStoryResponse_post\n        }\n        ...StoryResponse_threadedStoryResponse_post\n      }\n      ...StoryResponse_threadedStoryResponse_post\n    }\n    ...StoryResponse_threadedStoryResponse_post\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=o()(["\n  fragment StoryResponse_threadedStoryResponse_post on Post {\n    id\n    responsesCount\n    postResponses {\n      count\n    }\n    creator {\n      isBlocking\n      hasDomain\n    }\n    clapCount\n\n    previewContent {\n      bodyModel {\n        paragraphs {\n          text\n          type\n        }\n      }\n    }\n    ...PostPresentationTracker_post\n    ...ResponseHeader_post\n    ...ResponseQuote_post\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var p=(0,i.Ps)(u(),a.F,s.h,l.u),d=(0,i.Ps)(c(),p)},54260:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r=n(67294).createContext({inResponseToPostId:"",isThreadedResponsesVisible:!1,toggleThreadedResponses:function(){}})},11274:(e,t,n)=>{"use strict";n.d(t,{z:()=>K});var r,o=n(63038),i=n.n(o),s=n(59713),a=n.n(s),l=n(46829),c=n(67294),u=n(70561),p=n(2074),d=n(73185),m=n(14267),g=n(33698),f=n(319),v=n.n(f),h=n(74890),E=n(20860),b=n(54260),y=n(22091),x=n(80735),P=n(27572),S=n(28309),R=n(14391);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.LEGACY=1]="LEGACY",e[e.STORY=2]="STORY",e[e.SIMPLE=3]="SIMPLE"}(r||(r={}));var w,_=function(){return{padding:"0 24px"}},C=function(e,t){return{marginBottom:t?"0px":"24px",marginLeft:"24px",borderLeft:"3px solid ".concat(e.baseColor.border.lighter)}},T=function(e,t){var n,r,o,i,s,a,l=null==t||null===(n=t.post)||void 0===n?void 0:n.threadedPostResponses,c=null==t?void 0:t.post,u=null==t||null===(r=t.post)||void 0===r?void 0:r.threadedPostResponses;if(!(c&&l&&l.posts&&u))return e;var p=(null==e||null===(o=e.post)||void 0===o||null===(i=o.threadedPostResponses)||void 0===i?void 0:i.posts)||[],d=(null==t||null===(s=t.post)||void 0===s||null===(a=s.threadedPostResponses)||void 0===a?void 0:a.posts)||[];return{post:I({},c,{threadedPostResponses:I({},u,{posts:[].concat(v()(p),v()(d))})})}},k=function(e){var t,n=e.replies,r=e.parentPost,o=e.inResponseToPostId;return c.createElement(y.xu,null,null==n||null===(t=n.posts)||void 0===t?void 0:t.map((function(e,t,n){if(!e)return null;var i=t!==n.length-1;return c.createElement(D,{reply:e,parentPost:r,bottomBorder:i,index:t,inResponseToPostId:o,key:e.id})})))},D=function(e){var t,n,o,s,a,u,g=e.reply,f=e.parentPost,v=e.bottomBorder,O=e.index,I=e.inResponseToPostId,w=(0,S.Iq)(),D=(0,S.Fg)(),A=c.useContext(m.D),j=A.responsesLocked,L=A.isLockedResponse,B=A.inResponseToQuote,M=A.setInResponseToQuote,N=A.setIsSavingResponse,U=c.useState([]),F=i()(U,2),H=F[0],Q=F[1],V=c.useRef(null),W=(0,l.useLazyQuery)(p.Ag,{variables:{postId:g.id,postResponsesPaging:{limit:10}},ssr:!1}),$=i()(W,2),z=$[0],q=$[1],Y=q.called,Z=q.data,G=q.loading,K=q.fetchMore;c.useEffect((function(){var e;(null==V||null===(e=V.current)||void 0===e?void 0:e.getBoundingClientRect)&&V.current.getBoundingClientRect().bottom>window.innerHeight&&V.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var X,J=null==Z||null===(t=Z.post)||void 0===t?void 0:t.threadedPostResponses,ee=(null==J?void 0:J.posts)&&((null===(n=g.postResponses)||void 0===n?void 0:n.count)||0)>(null===(o=J.posts)||void 0===o?void 0:o.length),te=ee&&((null==g||null===(s=g.postResponses)||void 0===s?void 0:s.count)||0)-((null==J||null===(a=J.posts)||void 0===a?void 0:a.length)||0),ne=null==J||null===(u=J.pagingInfo)||void 0===u?void 0:u.next;return ne&&(X=function(){return K({variables:{postId:g.id,postResponsesPaging:{limit:ne.limit,to:ne.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return T(e,n)}})}),c.createElement(y.Bn,null,(function(e){var t,n=e.isVisible,o=e.toggle;return c.createElement(y.xu,{borderBottom:v?"BASE_LIGHTER":"NONE"},c.createElement(b.H.Provider,{value:{inResponseToPostId:I,isThreadedResponsesVisible:n,toggleThreadedResponses:function(){Y||z(),o()}}},c.createElement("div",{className:w(_),ref:0===O?V:void 0},function(e){switch(e.inResponseToType){case r.LEGACY:return e.content.bodyModel.paragraphs.every((function(e){return e.type===R.NJ.P&&0===e.markups.length}));case r.STORY:return!1;default:return!0}}(g)?c.createElement(h.b,{responsePost:g,index:O,parentPost:f,omitBottomBorder:!0}):c.createElement(P.cW,{source:{index:O},key:g.id,extendSource:!0},c.createElement(E.H,{storyResponse:g,parentPost:f,omitBottomBorder:!0})))),n&&c.createElement("div",{className:w(C(D,ee))},G&&c.createElement(y.xu,{marginLeft:"24px"},c.createElement(d.j,null)),(null==J?void 0:J.posts)&&(null===(t=J.posts)||void 0===t?void 0:t.length)>0&&c.createElement(m.D.Provider,{value:{setIsSavingResponse:N,responsesLocked:j,isLockedResponse:L,editingResponsesAtIndices:H,setEditingResponsesAtIndices:Q,inResponseToQuote:B,setInResponseToQuote:M}},c.createElement(k,{replies:J,parentPost:f,inResponseToPostId:g.id}))),n&&ee&&c.createElement(y.xu,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},c.createElement(x.F,{color:"ACCENT",scale:"M"},c.createElement(y.rU,{linkStyle:"OBVIOUS",onClick:X},"Load more replies (".concat(te,")")))))}))},A=n(59070),j=n(43238),L=n(1036),B=n(32262),M=n(89894),N=n(3149),U=n(89349),F=n(80087),H=n(29035);!function(e){e.Recommended="Recommended",e.Oldest="Oldest",e.Newest="Newest"}(w||(w={}));var Q=[w.Recommended,w.Newest,w.Oldest],V={height:"80vh",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontStyle:"italic",fontWeight:200},W=function(e){var t,n,r,o,s,a,l,p,f=e.responses,v=e.parentPost,h=e.responsesLocked,E=e.isLockedResponse,b=e.isLoadingInitialContent,y=e.isResponsesSidebarVisible,P=e.setIsResponsesSidebarVisible,R=e.inResponseToQuote,O=e.setInResponseToQuote,I=e.fetchMore,_=e.responseCount,C=(0,S.Iq)(),D=(0,u.v9)((function(e){return e.client.useNeedForSpeed}),u.wU),W=c.useState(w.Recommended),$=i()(W,2),z=$[0],q=$[1],Y=c.useState(!1),Z=i()(Y,2),G=Z[0],K=Z[1],X=c.useState([]),J=i()(X,2),ee=J[0],te=J[1],ne=v.id,re=0!==(null===(t=v.postResponses)||void 0===t?void 0:t.count)?"(".concat(null===(n=v.postResponses)||void 0===n?void 0:n.count,")"):"",oe=f,ie=(null==f?void 0:f.posts)&&((null===(r=v.postResponses)||void 0===r?void 0:r.count)||0)>(null==f||null===(o=f.posts)||void 0===o?void 0:o.length),se=ie&&_-((null==f||null===(s=f.posts)||void 0===s?void 0:s.length)||0),ae=null==f||null===(a=f.pagingInfo)||void 0===a?void 0:a.next;return ae&&(p=function(){return I({variables:{postId:v.id,postResponsesPaging:{limit:ae.limit,to:ae.to}},updateQuery:function(e,t){var n=t.fetchMoreResult;return T(e,n)}})}),c.createElement(m.D.Provider,{value:{setIsSavingResponse:K,responsesLocked:h,isLockedResponse:E,editingResponsesAtIndices:ee,setEditingResponsesAtIndices:te,inResponseToQuote:R,setInResponseToQuote:O}},y&&G&&c.createElement(M.TF,{horizontalOverride:{left:"calc(100vw - ".concat(g.ZR,")")}}),c.createElement(M.xu,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"24px",paddingBottom:"18px"},c.createElement(x.X6,{scale:"S"},"Responses ",re),c.createElement(M.xu,{display:"flex",flexDirection:"row"},c.createElement(j.c,{parentPost:v,responsesLocked:h}),c.createElement(M.xu,{position:"relative",right:"-7px"},c.createElement(N.Z,{onClick:function(){return P(!1)},size:"REGULAR",isPositionAbsolute:!1})))),b?c.createElement(M.xu,{padding:"0 24px"},c.createElement(d.j,null)):c.createElement(c.Fragment,null,!D||y?c.createElement(A.O,{parentPostId:ne}):null,c.createElement(L.Z,{name:"enable_responses_sortby"},c.createElement(M.Bn,{initialVisibility:!0},(function(e){var t=e.isVisible,n=e.toggle,r=e.hide;return c.createElement(M.xu,{backgroundColor:"BASE_LIGHT",padding:"10px 24px"},c.createElement(M.J2,{isVisible:t,hide:r,customZIndex:530,popoverRenderFn:function(){return c.createElement(B.mX,null,Q.map((function(e){return c.createElement(B.Sl,null,c.createElement(M.rU,{linkStyle:"SUBTLE",onClick:function(){!function(e){q(e)}(e),r()}},e))})))}},c.createElement(M.rU,{onClick:n},z,c.createElement(F.Z,{className:C({margin:"0px 5px"})}))))}))),f&&0!==(null==oe||null===(l=oe.posts)||void 0===l?void 0:l.length)?c.createElement(M.xu,null,c.createElement(k,{replies:f,inResponseToPostId:v.id,parentPost:v}),ie&&c.createElement("div",{className:C((function(e){var t={marginTop:"10px",marginLeft:"24px",marginBottom:"24px"};return(0,H.ic)()&&(t[(0,U.CE)(e.breakpoints.lg-.02)]={marginBottom:"48px"}),t}))},c.createElement(x.F,{color:"ACCENT",scale:"M"},c.createElement(M.rU,{linkStyle:"OBVIOUS",onClick:p},"Load more replies (".concat(se,")"))))):c.createElement("div",{className:C(V)},c.createElement(x.F,{scale:"L",color:"LIGHTER"},"There are currently no responses for this story."),c.createElement(x.F,{scale:"L",color:"LIGHTER"},"Be the first to respond."))))},$=n(89714),z=n(80637),q=function(){return{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed",backgroundColor:"rgba(0, 0, 0, 0.08)",zIndex:510,cursor:"pointer",opacity:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s",pointerEvents:"none"}},Y=function(e){return a()({width:"414px",position:"fixed",zIndex:520,backgroundColor:"white",left:"100%",top:"0px",height:"100%",boxSizing:"border-box",overflow:"auto","-ms-overflow-style":"-ms-autohiding-scrollbar",boxShadow:"rgba(0, 0, 0, 0.15) 0px 4px 12px",opacity:1,transform:"translateX(0px)",transition:"transform 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s, opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1) 0s"},(0,z.sm)(e),{left:0,width:"100%",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",transform:"translateY(100%)","-webkit-overflow-scrolling":"touch"})},Z=function(e,t){return function(n){if(e){var r=n.breakpoints.md-.02;return t<=r?{transform:"translateY(30px) !important"}:{transform:"translateX(-415px)"}}return{}}},G=function(e){return e?{opacity:1,pointerEvents:"all"}:{}},K=function(e){var t,n,r,o,s,a=e.setIsResponsesSidebarVisible,d=e.isResponsesSidebarVisible,m=e.inResponseToQuote,g=e.setInResponseToQuote,f=e.parentPost,v=(0,$.Uo)().baseTheme,h=(0,S.Iq)(),E=(0,u.v9)((function(e){return e.client.useNeedForSpeed}),u.wU),b=(0,l.useLazyQuery)(p.Ag,{variables:{postId:f.id,postResponsesPaging:{limit:10}},ssr:!1}),y=i()(b,2),x=y[0],R=y[1],O=R.called,I=R.loading,w=R.data,_=R.fetchMore;O||E&&!d||x();var C=null==w||null===(t=w.post)||void 0===t?void 0:t.responsesLocked,T=null==w||null===(n=w.post)||void 0===n?void 0:n.isLockedResponse,k=null==w||null===(r=w.post)||void 0===r?void 0:r.threadedPostResponses,D=(null==w||null===(o=w.post)||void 0===o||null===(s=o.postResponses)||void 0===s?void 0:s.count)||0,A=c.useState(0),j=i()(A,2),L=j[0],B=j[1],N=c.useState(!1),U=i()(N,1)[0];return c.useEffect((function(){L||B(window.innerWidth)}),[]),c.createElement(M.f6,{theme:v},c.createElement(P.cW,{source:{name:"responses",postId:f.id},extendSource:!0},c.createElement(M.xu,{print:{display:"none"}},c.createElement("div",{className:h([q,G(d)]),onClick:function(){a(!1)},"aria-hidden":!d}),c.createElement("div",{className:h([Y,Z(d,L)]),"aria-hidden":!d},c.createElement(W,{responses:k,responseCount:D,parentPost:f,responsesLocked:C,isLockedResponse:T,isLoadingInitialContent:I,isFetchingNextSetOfResponses:U,isResponsesSidebarVisible:d,setIsResponsesSidebarVisible:a,inResponseToQuote:m,setInResponseToQuote:g,fetchMore:_})))))}},47076:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(87757),o=n.n(r),i=n(67294),s=n(70561),a=n(59116),l=n(78067),c=n(14267),u=n(30049),p=n(319),d=n.n(p),m=n(59713),g=n.n(m),f=n(28655),v=n.n(f),h=n(71439),E=n(80439),b=n(43522),y=n(58992);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(){var e=v()(["\n  mutation publishPostThreadedResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n  ) {\n    publishPostThreadedResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n    ) {\n      id\n      ... on Post {\n        ...StoryResponse_threadedStoryResponse_post\n        ...SimpleResponse_threadedSimpleResponse_post\n        ...SimpleResponse_threadedSimpleResponse_defaultPostResponses\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return S=function(){return e},e}var R=(0,h.Ps)(S(),b.Df,y.t,b.K5),O=function(e){var t=e.children,n=e.parentPostId;return i.createElement(E.mm,{mutation:R,update:function(e,t){var r=function(e,t){if(!t||!e.data)return null;var n=e.data.publishPostThreadedResponse;return P({},t,{postResponses:{count:t.postResponses.count+1},threadedPostResponses:P({},t.threadedPostResponses,{posts:[n].concat(d()(t.threadedPostResponses.posts))})})}(t,e.readFragment({id:"Post:".concat(n),fragment:b.K5,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}));null!==r&&e.writeFragment({id:"Post:".concat(n),fragment:b.K5,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultPostResponses",data:P({},r)})}},(function(e,n){return t({publishResponse:e,loading:n.loading,error:n.error})}))},I=n(53945),w=n(19537),_=n(77209),C=n(62630),T=n(27572),k=n(88914),D=function(e){var t=e.parentPostId,n=e.placeholder,r=e.hideReplyEditing,p=void 0===r?function(){}:r,d=e.editorOpenByDefault,m=void 0===d||d,g=e.showEditorHeader,f=void 0===g||g,v=i.useContext(c.D),h=v.setIsSavingResponse,E=v.responsesLocked,b=v.inResponseToQuote,y=v.setInResponseToQuote,x=(0,T.pK)(),P=(0,C.Av)(),S=(0,s.I0)(),R=i.useRef(null);i.useEffect((function(){var e;(null==R||null===(e=R.current)||void 0===e?void 0:e.getBoundingClientRect)&&R.current.getBoundingClientRect().bottom>window.innerHeight&&R.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var D=function(e){return function(n,r){var i;return o().async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o().awrap(e({variables:{inResponseToPostId:t,deltas:n,inResponseToQuoteId:null==b?void 0:b.id}}));case 2:i=s.sent,r(i.data.savePostResponse.id);case 4:case"end":return s.stop()}}))}};return i.createElement(O,{parentPostId:t},(function(e){var r=e.publishResponse,s=e.loading,c=e.error;return(0,a._M)(c)||E?(h(!1),i.createElement(u.R,{message:_.x})):i.createElement(I.P,null,(function(e){var c,u=e.saveResponse;return i.createElement("div",{ref:R},i.createElement(_.j,{postId:t,isPublishingResponse:s,publishResponse:(c=r,function(e,n){return h(!0),c({variables:{inResponseToPostId:t,deltas:e,inResponseToQuoteId:null==b?void 0:b.id}}).then((function(e){var r=e.data&&e.data.publishPostThreadedResponse,o=(0,a.ed)(e.errors);if(r)return P.event("inlineEditor.publish",{postId:t,context:l.r.INLINE_POST_RESPONSE,source:x}),h(!1),n();o&&(h(!1),S((0,k.Dx)({message:"You’ve reached the limit for stories that can be published in one day. Please try again tomorrow.",toastStyle:"ERROR"})))}))}),saveResponse:D(u),type:w.H.create,inResponseToQuote:b,onClose:function(){return o().async((function(e){for(;;)switch(e.prev=e.next){case 0:return y(void 0),p(),e.abrupt("return",{});case 3:case"end":return e.stop()}}))},editorOpenByDefault:m,placeholder:n,showEditorHeader:f}))}))}))}},30049:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(67294),o=n(89894),i=n(80735),s=n(27952),a=function(e){var t=e.message||"The author has closed discussion for this story.";return r.createElement(o.xu,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px"},r.createElement(i.F,{scale:"M",tag:"span",color:"DARKER"},t," ",r.createElement(o.rU,{href:(0,s.VG)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},34430:(e,t,n)=>{"use strict";n.d(t,{x:()=>g});var r=n(59713),o=n.n(r),i=n(67294),s=n(68356),a=n.n(s),l=n(19537),c=n(79853),u=n(90320);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d={delay:1e3,timeout:2e4,loading:function(e){return e.error?i.createElement(c.Z,{error:e.error}):e.timedOut?i.createElement(c.Z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?i.createElement(u.Z,null):null}},m=a()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d,{loader:function(){return n.e(6635).then(n.bind(n,97980))},modules:["src/components/responses/editor/InlineResponseEditor"],webpack:function(){return[97980]},render:function(e,t){var n=e.InlineResponseEditor;return i.createElement(n,t)}})),g=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?l.H.create:r,s=e.initialValue;return i.createElement(m,{parentPostId:t,responseId:n,type:o,initialValue:s})}},53945:(e,t,n)=>{"use strict";n.d(t,{P:()=>u});var r=n(28655),o=n.n(r),i=n(71439),s=n(80439),a=n(67294);function l(){var e=o()(["\n  mutation savePostResponse(\n    $inResponseToPostId: ID!\n    $deltas: [Delta!]!\n    $inResponseToQuoteId: ID\n  ) {\n    savePostResponse(\n      inResponseToPostId: $inResponseToPostId\n      deltas: $deltas\n      inResponseToQuoteId: $inResponseToQuoteId\n    ) {\n      ... on Post {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,i.Ps)(l()),u=function(e){var t=e.children;return a.createElement(s.mm,{mutation:c},(function(e){return t({saveResponse:e})}))}},19537:(e,t,n)=>{"use strict";var r;n.d(t,{H:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},77209:(e,t,n)=>{"use strict";n.d(t,{x:()=>ee,j:()=>se});var r=n(63038),o=n.n(r),i=n(87757),s=n.n(i),a=n(59713),l=n.n(a),c=n(67294),u=n(70561),p=n(84792),d=n(10143),m=n(26600),g=n(25772),f=n(78067),v=n(22470),h=n(54803),E=n(9735),b=n(24548),y=n(42963),x=n(89894),P=n(28309);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var R=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.99 5.04c.26-.21.64-.22.91-.01.97.72 1.77 1.21 2.6 1.54.83.32 1.72.48 2.89.5.41.01.74.35.74.76-.02 3.62-.43 6.26-1.45 8.21-1.03 1.98-2.66 3.21-4.97 4.08a.75.75 0 0 1-.53 0c-2.25-.87-3.86-2.1-4.9-4.07-1.02-1.95-1.46-4.59-1.48-8.22 0-.41.33-.75.75-.76 1.19-.02 2.1-.18 2.92-.5.82-.32 1.6-.81 2.52-1.53zm.46.9c-.9.69-1.71 1.21-2.62 1.56a8.9 8.9 0 0 1-3.02.57c.03 3.45.46 5.82 1.36 7.51.88 1.69 2.25 2.77 4.28 3.57 2.1-.8 3.47-1.89 4.34-3.57.89-1.7 1.3-4.07 1.34-7.51a8.8 8.8 0 0 1-3-.57 11.8 11.8 0 0 1-2.68-1.56zm0 9.15a2.67 2.67 0 1 0 0-5.34 2.67 2.67 0 0 0 0 5.34zm0 1a3.67 3.67 0 1 0 0-7.34 3.67 3.67 0 0 0 0 7.34zm-1.82-3.77l.53-.53.91.92 1.63-1.63.52.53-2.15 2.15-1.44-1.44z"});const O=function(e){return c.createElement("svg",S({width:25,height:25,viewBox:"0 0 25 25"},e),R)};var I=function(){var e=(0,P.Iq)();return c.createElement(x.$W,{isVisible:!0,darkTheme:!0,placement:"top",mouseLeaveDelay:0,targetDistance:10,popoverRenderFn:function(){return c.createElement(x.xu,{padding:"8px"},"View community guidelines")}},c.createElement(x.rU,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},c.createElement(O,null)))},w=n(32262),_=n(74465),C=n(93394),T=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}},k=function(e){var t=e.isEdit,n=e.saveResponse,r=e.setDraftResponseId,o=(0,P.Iq)();return c.createElement(x.Bn,null,(function(e){var i=e.isVisible,s=e.toggle,a=e.hide;return c.createElement(x.J2,{isVisible:i,hide:a,customZIndex:_.ZP.responseSidebarPopover,noArrow:!0,placement:"bottom-end",popoverRenderFn:function(){return c.createElement(w.mX,null,c.createElement(w.Sl,null,c.createElement(x.rU,{onClick:t&&r?r:n,"data-testid":"saveResponseMenuItem"},"Make this response a story")))}},c.createElement(x.rU,{onClick:s,className:o(T),"data-testid":"editorMenu"},c.createElement(C.Z,null)))}))},D=n(19692),A=n(14391),j=n(83024),L=function(e){var t=e.quote,n=(0,P.Iq)();if(!t)return null;var r=(0,j.eu)(t);return r?c.createElement("div",{className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},c.createElement(D.ZP,{paragraph:r,paragraphStyle:A.NJ.P,spaceTop:4,richTextStyle:"STREAM"})):null},B=function(e){var t=e.onFocus,n=e.responseContent,r=e.setResponseContent,o=e.setIsEmpty,i=e.isEditorOpen,s=(0,P.Iq)();return c.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;o(!t),r(t)},onFocus:t,className:s({width:"100%",padding:"14px",resize:"none",minHeight:i?"100px":"0",height:i?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},M=n(19537),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0},n=t.includeInitialDeltas,r=[],o=e.split("\n");return n&&(r=[{type:8,index:0,section:{name:U(),startIndex:0}}]),o.forEach((function(e,t){r.push({type:1,paragraph:{markups:[],name:U(),text:e,type:1},verifySameName:!1,index:t})})),r},U=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},F=n(66893),H=n(9785),Q=n(62181),V=n(98281),W=n(42933),$=n(36544),z=function(e){var t=e.isVisible,n=e.hide,r=(0,H.YC)().value;return c.createElement($.C,null,(function(e){var o=e.mutate;return c.createElement(x.QH,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){o()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==r?void 0:r.unverifiedEmail,".")}))},q=n(80735),Y=n(62630),Z=n(27572),G=n(27952),K=n(29035);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee="The author has closed discussion for this story. We are unable to save changes to your response.",te=function(){return{"& button":{border:"none"}}},ne="400ms",re="300ms",oe=function(e){return J({},{display:"flex",alignSelf:"flex-end",padding:"0 14px"},e?{transition:"opacity ".concat(ne,", max-height ").concat(ne),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(ne,", max-height ").concat(ne),opacity:0,maxHeight:0})},ie=function(e){return e?{transition:"min-height ".concat(ne),minHeight:"100px"}:{transition:"min-height ".concat(ne),minHeight:"15px"}},se=function(e){var t,n,r,i=e.postId,a=e.responseId,l=e.createdAt,S=e.isPublishingResponse,R=e.publishResponse,O=e.saveResponse,w=void 0===O?function(){return Promise.resolve()}:O,_=e.type,C=void 0===_?M.H.create:_,T=e.onClose,D=void 0===T?function(){return s().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}))}:T,A=e.inResponseToQuote,j=e.initialValue,U=e.placeholder,$=void 0===U?"What are your thoughts?":U,X=e.editorOpenByDefault,ee=void 0!==X&&X,se=e.showEditorHeader,ae=void 0===se||se,le=C===M.H.edit,ce=(0,P.Iq)(),ue=(0,Y.Av)(),pe=(0,Z.pK)(),de=(0,K.rO)(navigator.userAgent),me=Boolean((0,F.P5)("enable_lite_threaded_responses"))&&C===M.H.edit,ge=(0,m.c)().value,fe=(0,E.Vz)([E.Fm]),ve=fe.editor,he=fe.renderLeaf,Ee=fe.renderElement,be=c.useState(le||ee),ye=o()(be,2),xe=ye[0],Pe=ye[1],Se=c.useState(!0),Re=o()(Se,2),Oe=Re[0],Ie=Re[1],we=c.useState((t=j)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),_e=o()(we,2),Ce=_e[0],Te=_e[1],ke=c.useState(void 0),De=o()(ke,2),Ae=De[0],je=De[1],Le=c.useState(!1),Be=o()(Le,2),Me=Be[0],Ne=Be[1],Ue=c.useCallback((function(){return Ne(!1)}),[]),Fe=(0,u.v9)((function(e){return e.config.authDomain})),He=(0,H.YC)().value,Qe=c.useCallback((function(){D().then((function(e){e.preventStateUpdate||(Pe(!1),de?Te(""):(0,h.oe)(ve))}))}),[Pe]);return c.useEffect((function(){A&&Pe(!0)}),[A]),c.useEffect((function(){Ie(p.Node.string(ve).toString().trim().length<=0)}),[ge]),c.useEffect((function(){xe&&!de&&(ee||me||d.F3.blur(ve),setTimeout((function(){return d.F3.focus(ve)}),0))}),[xe]),Ae?(ue.event("inlineEditor.expand",{postId:i,context:f.r.INLINE_POST_RESPONSE,source:pe}),c.createElement(y.Z,{to:(0,G.d0)(Fe,Ae)})):c.createElement(W.Z,{marginBottom:"20px",padding:le?"0":"0 24px"},c.createElement("div",{className:ce({backgroundColor:"white",boxShadow:"0px 2px 8px rgba(0,0,0,0.12)",borderRadius:"4px",display:"flex",flexDirection:"column",paddingTop:xe?"14px":"0",paddingBottom:xe?"14px":"0",transition:"padding-top ".concat(ne,", padding-bottom ").concat(ne)})},He&&ae&&c.createElement("div",{className:ce((n=xe,r={display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"0 14px"},J({},r,n?{transition:"opacity ".concat(ne,", max-height ").concat(ne,", margin-bottom ").concat(ne),opacity:1,maxHeight:"100px",marginBottom:"6px"}:{transition:"opacity ".concat(re,", max-height ").concat(re,", margin-bottom ").concat(re),opacity:0,maxHeight:0,marginBottom:"0"})))},c.createElement(W.Z,{display:"flex",alignItems:"center"},c.createElement(V.ZP,{scale:"XS",user:He}),c.createElement(W.Z,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},c.createElement(q.F,{scale:"M",color:"DARKER"},He.name),le&&l&&c.createElement(q.F,{scale:"M",color:"LIGHTER"},c.createElement(b.Z,{timestamp:l})))),xe&&c.createElement(W.Z,{display:"flex",justifyContent:"flex-end"},c.createElement(W.Z,{display:"inline-block",margin:"0 -2px 0 0"},c.createElement(I,null)),c.createElement(k,{isEdit:le,setDraftResponseId:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return je(a)})),saveResponse:function(){var e=de?N(Ce):(0,h.wB)(ve);return w(e,je)}}))),xe&&c.createElement(L,{quote:A}),c.createElement(W.Z,{display:"flex",flexDirection:"column"},He?c.createElement("div",{className:ce(ie(xe))},de?c.createElement(B,{onFocus:function(){return Pe(!0)},responseContent:Ce,setIsEmpty:Ie,setResponseContent:Te,isEditorOpen:xe}):c.createElement(W.Z,{padding:"14px"},c.createElement(v.c,{editor:ve},c.createElement(g.O,{onFocus:function(){return Pe(!0)},renderLeaf:he,renderElement:Ee,placeholder:$})))):c.createElement(Q.R9,{operation:"register",susiEntry:"respond_sidebar"},c.createElement(W.Z,{padding:"14px"},c.createElement(q.F,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),c.createElement("div",{className:ce(oe(xe))},c.createElement("div",{className:ce(te)},c.createElement(x.zx,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return Qe()}},"Cancel")),c.createElement(x.zx,{buttonStyle:"STRONG",size:"SMALL",disabled:Oe||S||p.Node.string(ve)===Ce,onClick:function(){var e=de?N(Ce,le?{includeInitialDeltas:!1}:void 0):(0,h.wB)(ve,le?{includeInitialDeltas:!1}:void 0);(null==He?void 0:He.unverifiedEmail)?Ne(!0):R(e,Qe)}},le?"Update":"Respond")))),c.createElement(z,{isVisible:Me,hide:Ue}))}},59070:(e,t,n)=>{"use strict";n.d(t,{O:()=>g});var r=n(59713),o=n.n(r),i=n(67294),s=n(68356),a=n.n(s),l=n(19537),c=n(79853),u=n(90320);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d={delay:1e3,timeout:2e4,loading:function(e){return e.error?i.createElement(c.Z,{error:e.error}):e.timedOut?i.createElement(c.Z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?i.createElement(u.Z,null):null}},m=a()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d,{loader:function(){return n.e(6635).then(n.bind(n,51245))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[51245]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return i.createElement(n,t)}})),g=function(e){var t=e.parentPostId,n=e.responseId,r=e.type,o=void 0===r?l.H.create:r,s=e.initialValue;return i.createElement(m,{parentPostId:t,responseId:n,type:o,initialValue:s})}},31078:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>w,Z:()=>C});var r=n(59713),o=n.n(r),i=n(63038),s=n.n(i),a=n(28655),l=n.n(a),c=n(71439),u=n(46829),p=n(67294),d=n(32262),m=n(89894),g=n(80735),f=n(62630),v=n(27572),h=n(28309);function E(){var e=l()(["\n  query FetchPostResponsesLockedQuery($postId: ID!) {\n    post(id: $postId) {\n      id\n      ...CloseDiscussion_post\n    }\n  }\n  ","\n"]);return E=function(){return e},e}function b(){var e=l()(["\n  fragment CloseDiscussion_post on Post {\n    id\n    responsesLocked\n    isLockedResponse\n  }\n"]);return b=function(){return e},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(){var e=l()(["\n  mutation UnlockResponsesOnPostMutation($postId: ID!) {\n    unlockResponsesOnPost(postId: $postId)\n  }\n"]);return P=function(){return e},e}function S(){var e=l()(["\n  mutation LockResponsesOnPostMutation($postId: ID!) {\n    lockResponsesOnPost(postId: $postId)\n  }\n"]);return S=function(){return e},e}var R=function(){return{fontStyle:"italic",textAlign:"center"}},O=(0,c.Ps)(S()),I=(0,c.Ps)(P()),w=function(e){var t,n=e.parentPostId,r=e.responsesLocked,o=e.hidePopoverMenu,i=(0,h.Iq)(),a=(0,f.Av)(),l=(0,v.pK)(),c=p.useState(!1),E=s()(c,2),b=E[0],y=E[1],x=(0,u.useMutation)(O,{variables:{postId:n},update:function(e){a.event("responses.locked",{postId:n,source:l}),_(e,n,!0,o)}}),P=s()(x,1)[0],S=(0,u.useMutation)(I,{variables:{postId:n},update:function(e){_(e,n,!1,o)}}),w=s()(S,1)[0];return t=!0===r?p.createElement(m.rU,{onClick:w},"Open discussion"):p.createElement(m.rU,{onClick:function(){return y(!0)}},"Close discussion"),p.createElement(p.Fragment,null,p.createElement(d.Sl,null,t),b&&p.createElement(m.Vq,{isVisible:b,hide:function(){return y(!1)},withCloseButton:!1,noPortal:!0,padding:50},p.createElement(m.xu,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},p.createElement(g.X6,{scale:"M"},"Close Discussion"),p.createElement(m.xu,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},p.createElement(g.F,{scale:"M",color:"DARKER"},"Closing a discussion prevents responses from being added or edited on your story. Existing responses will remain on your story.")),p.createElement(m.xu,{display:"flex",marginBottom:"20px"},p.createElement(m.rU,{onClick:function(){return y(!1)}},p.createElement(g.F,{scale:"M",color:"DARKER"},"Cancel")),p.createElement(m.xu,{marginLeft:"25px"},p.createElement(m.zx,{buttonStyle:"ERROR",onClick:P,"data-test-id":"close-discussion-button"},"Close discussion"))),p.createElement("div",{className:i(R)},p.createElement(g.F,{scale:"M"},"You can reopen the discussion at any time.")))))},_=function(e,t,n,r){var o=e.readQuery({query:T,variables:{postId:t}});o&&(e.writeQuery({query:T,data:Object.assign({},o,{post:x({},o.post,{responsesLocked:n})}),variables:{postId:t}}),r())},C=(0,c.Ps)(b()),T=(0,c.Ps)(E(),C)},43238:(e,t,n)=>{"use strict";n.d(t,{c:()=>y});var r=n(63038),o=n.n(r),i=n(67294),s=n(70561),a=n(66893),l=n(9785),c=n(89894),u=n(80735),p=n(27572),d=n(6688),m=n(93394),g=n(27952),f=n(32262),v=n(31078),h={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},E=function(e){var t=e.parentPostId,n=e.responsesLocked,r=e.isPopoverMenuVisible,o=e.hidePopoverMenu,a=(0,d.I)(),l=(0,s.v9)((function(e){return e.config.authDomain})),u=i.useRef(null);return i.useEffect((function(){var e=function(e){var t;(null==u||null===(t=u.current)||void 0===t?void 0:t.contains(e.target))||o()};if(r)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[r]),i.createElement("div",{className:a(h),ref:u},i.createElement(f.mX,null,i.createElement(f.Sl,null,i.createElement(c.rU,{href:(0,g.t$)(l,t)},"Manage responses")),i.createElement(v.Eq,{parentPostId:t,responsesLocked:n,hidePopoverMenu:o})))},b=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},y=function(e){var t,n,r=e.parentPost,f=e.responsesLocked,v=(0,d.I)(),h=(0,l.YC)().value,y=(0,s.v9)((function(e){return e.config.authDomain})),x=Boolean((0,a.P5)("enable_lock_responses")),P=i.useState(!1),S=o()(P,2),R=S[0],O=S[1],I=(null==h?void 0:h.id)===(null===(t=r.creator)||void 0===t?void 0:t.id),w=null==r||null===(n=r.collection)||void 0===n?void 0:n.viewerIsEditor;return I||w?x?i.createElement(c.xu,null,i.createElement(c.rU,{onClick:function(e){e.nativeEvent.stopPropagation(),O(!R)},inline:!0,className:v(b)},i.createElement(m.Z,null)),R&&i.createElement("div",{className:v({position:"relative"})},i.createElement(p.cW,{source:{susiEntry:"respond_sidebar"},extendSource:!0},i.createElement(E,{parentPostId:r.id,responsesLocked:f,isPopoverMenuVisible:R,hidePopoverMenu:function(){return O(!1)}})))):i.createElement(c.xu,{paddingRight:"8px"},i.createElement(c.rU,{href:(0,g.t$)(y,r.id),linkStyle:"OBVIOUS",inline:!0},i.createElement(u.F,{scale:"S",color:"LIGHTER"},"Manage responses"))):null}},26912:(e,t,n)=>{"use strict";var r;n.d(t,{Q:()=>r}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(r||(r={}))},37258:(e,t,n)=>{"use strict";n.d(t,{o:()=>x});var r=n(63038),o=n.n(r),i=n(28655),s=n.n(i),a=n(71439),l=n(46829),c=n(80439),u=n(67294),p=n(70561),d=n(24087),m=n(66893),g=n(90738),f=n(14414),v=n(62630),h=n(27572),E=n(11348);function b(){var e=s()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}var y=(0,a.Ps)(b()),x=function(e){var t=e.actionUrl,n=e.children,r=e.onSuccess,i=e.token,s=e.userId,a=(0,v.Av)(),b=!!(0,m.P5)("skip_sign_in_recaptcha"),x=u.useState(!1),P=o()(x,2),S=P[0],R=P[1],O=(0,p.v9)((function(e){return e.navigation.currentLocation})),I=(0,p.v9)((function(e){return e.session.user.id})),w=function(){R(!1)},_=(0,h.pK)(),C=(0,h.hp)(),T=t&&i?(0,f.hQ)(O,_,C,t,i):(0,f.hQ)(O,_,C),k=(0,l.useQuery)(d.e),D=k.loading,A=k.error,j=k.data,L=(j=void 0===j?{viewer:void 0}:j).viewer;return D||A?u.createElement(u.Fragment,null):u.createElement(c.mm,{mutation:y,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":a.event("site.loginLinkSent",{}),r&&r();break;case"FailedChallenge":a.event("site.loginByEmailCaptchaFailure",{}),R(!1);break;case"BadRequest":case"NotFound":default:w()}},onError:w},(function(e){var t=function(t){var n=L?L.id:I;(0,E.Zs)(!0,n,s,"Email",!1);var r="medium";a.event("susi.methodClicked",{entryPoint:C,operation:"login",susiMethod:r.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:r.toLowerCase(),alternateUserSuggestionTargetUserId:s,alternateUserSuggestionSourceUserId:n}),e({variables:{userId:s,redirect:T,captchaValue:t}})};return u.createElement(u.Fragment,null,!b&&u.createElement(g.k,{callback:t,shouldExecuteRecaptcha:S}),n({handleSubmit:function(){return b?t(null):R(!0)}}))}))}},19608:(e,t,n)=>{"use strict";n.d(t,{r:()=>l});var r=n(67294),o=n(90174),i=n(4134),s=n(70146),a=n(37581),l=function(e){var t=e.actionUrl,n=e.token,l=e.userSocialLogins,c={actionUrl:t||"",operation:"login",token:n||"",targetUserId:l.userId,alternateUserSuggestion:!0};return r.createElement(a.$,{eventData:{operation:c.operation}},l.google?r.createElement(i.x,c):l.facebook?r.createElement(o.q,c):l.twitter?r.createElement(s.G,c):r.createElement(r.Fragment,null))}},27168:(e,t,n)=>{"use strict";n.d(t,{G:()=>g});var r=n(59713),o=n.n(r),i=n(46829),s=n(67294),a=n(70561),l=n(24087),c=n(66893),u=n(89894),p=n(27572),d=n(88914);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){var t=e.declineSuggestedAccount,n=e.isSocial,r=(0,a.v9)((function(e){return{hasRenderedAlternateUserBanner:e.navigation.hasRenderedAlternateUserBanner}}),a.wU).hasRenderedAlternateUserBanner,g=!!(0,c.P5)("enable_highlander_member_digest"),f=(0,p.hp)(),v=(0,a.I0)(),h=(0,i.useQuery)(l.e),E=h.loading,b=h.error,y=h.data,x=(y=void 0===y?{viewer:void 0}:y).viewer;if(E||b)return s.createElement(s.Fragment,null);var P=function(e){return e?s.createElement(u.rU,{onClick:function(){return S("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):s.createElement(s.Fragment,null,"Not you?"," ",s.createElement(u.rU,{onClick:function(){return S("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",s.createElement(u.rU,{onClick:function(){return S("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},S=function(e){var n="SIGNIN_OPTIONS"===e?"login":"register";t(),v((0,d.Pc)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:n,step:e},!!f&&{susiEntry:f})))};return g&&r?P(x):x?s.createElement(u.rU,{onClick:function(){return t()}},"Not me"):P(n)}},48881:(e,t,n)=>{"use strict";n.d(t,{o:()=>P});var r=n(28655),o=n.n(r),i=n(59713),s=n.n(i),a=n(63038),l=n.n(a),c=n(46829),u=n(71439),p=n(80439),d=n(67294),m=n(70561),g=n(24087),f=n(62630),v=n(27572),h=n(51512),E=n(33572);function b(){var e=o()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return b=function(){return e},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.children,n=e.postRenderCallback,r=(0,f.Av)(),o=(0,v.hp)(),i=(0,m.v9)((function(e){return{referrerSource:e.navigation.referrerSource,sessionUserId:e.session.user.id}}),m.wU),s=i.referrerSource,a=i.sessionUserId,u=(0,h.P7)(s||""),b=u.userId,y=u.name,P=d.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),R=l()(P,2),O=R[0],I=R[1];d.useEffect((function(){var e=O.shouldRun,t=O.showSuggestedAccount,r=O.userSocialLogins;e&&n(k,t,r)}),[O.shouldRun]);var w=(0,c.useQuery)(g.e),_=w.loading,C=w.error,T=w.data,k=(T=void 0===T?{viewer:void 0}:T).viewer;if(_||C)return d.createElement(d.Fragment,null);var D=!("email"!==y||k&&k.mediumMemberAt||!b);return D&&b?d.createElement(p.AE,{query:S,variables:{userId:b}},(function(e){var i=e.loading,s=e.error,l=e.data,c=(l=void 0===l?{}:l).userSocialLogins,u=!(i||s||!c||k&&!c.isMember||!c.facebook&&!c.google&&!c.twitter&&!c.redactedEmailAddress),p=x({loading:i,showSuggestedAccount:u},u&&{userSocialLogins:c,declineSuggestedAccount:function(){var e=(0,E.S)(c);r.event("susi.suggestNotYou",{entryPoint:o,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==c?void 0:c.userId,alternateUserSuggestionSourceUserId:k?k.id:a})}});return!n||i||O.shouldRun||I({shouldRun:!0,showSuggestedAccount:u,userSocialLogins:c}),t(p)})):(n&&!O.shouldRun&&I(x({},O,{shouldRun:!0})),t({showSuggestedAccount:D,loading:!1}))},S=(0,u.Ps)(b())},10886:(e,t,n)=>{"use strict";n.d(t,{Q:()=>w});var r=n(63038),o=n.n(r),i=n(67294),s=n(70561),a=n(51562),l=n(66893),c=n(9785),u=n(89714),p=n(37258),d=n(19608),m=n(27168),g=n(48881),f=n(59317),v=n(4709),h=n(98281),E=n(89894),b=n(80735),y=n(62630),x=n(27572),P=n(33572),S=n(60095),R=n(44556),O="alternate_user_top_banner",I=function(e){var t=e.userSocialLogins,n=(0,f.j)().openModal,r=!!(0,l.P5)("enable_new_susi_modal");return t.facebook||t.google||t.twitter?i.createElement(d.r,{userSocialLogins:t}):i.createElement(p.o,{onSuccess:function(){return n({step:"CHECK_YOUR_INBOX",operation:r?"register":"login",susiEntry:O})},userId:t.userId},(function(e){var t=e.handleSubmit;return i.createElement(E.zx,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:t},"Send login link")}))},w=function(){var e=(0,c.YC)().value,t=(0,s.v9)((function(e){return e.session.user.id})),n=(0,s.I0)(),r=(0,y.Av)(),p=!!(0,l.P5)("enable_highlander_member_digest"),d=i.useState(!1),f=o()(d,2),w=f[0],_=f[1],C=i.useState("loading"),T=o()(C,2),k=T[0],D=T[1];return i.useEffect((function(){n((0,R.e6)(!0)),_(!0)}),[]),i.useEffect((function(){"rendered"===k&&n((0,S.T)(!0)),"not_eligible"===k&&n((0,R.e6)(!1))}),[k]),i.createElement(x.cW,{source:{susiEntry:O}},i.createElement(g.o,{postRenderCallback:function(e,n,o){D(n?"rendered":"not_eligible"),n&&(r.event("experiment.eligible",{experimentId:"358323e239a2"}),p&&r.event("alternateUserBanner.viewed",{alternateUserSuggestionAccountType:(0,P.S)(o),alternateUserSuggestionTargetUserId:o.userId,alternateUserSuggestionSourceUserId:e?e.id:t}))}},(function(n){var o,s=n.showSuggestedAccount,l=n.declineSuggestedAccount,c=n.userSocialLogins;return p&&w&&s&&l&&c?i.createElement(u.N8,null,i.createElement(v.Y,{onClose:function(){return r.event("alternateUserBanner.dismissed",{alternateUserSuggestionAccountType:(0,P.S)(c),alternateUserSuggestionTargetUserId:c.userId,alternateUserSuggestionSourceUserId:e?e.id:t})}},i.createElement(E.xu,{alignItems:"flex-start",display:"flex",flexDirection:"column",sm:{alignItems:"center"}},i.createElement(E.xu,{alignItems:"center",display:"flex",marginBottom:"21px",sm:{flexDirection:"column",margin:"0 21px 21px",textAlign:"center"}},!e&&(null===(o=c.userAvatar)||void 0===o?void 0:o.imageId)&&i.createElement(E.xu,{display:"flex",marginRight:"20px",sm:{marginBottom:"18px",marginRight:"0"}},i.createElement(h.ZP,{scale:"S",user:c.userAvatar})),i.createElement(a.W,{featureString:"alternate-user-top-banner",target:"header"},i.createElement(b.F,{color:"DARKER",scale:"M"},function(e,t){var n=t.isMember,r=t.redactedEmailAddress;return i.createElement(i.Fragment,null,e?"Switch":"Sign in"," to your ",n?"member ":"","account (",i.createElement("b",null,r),") for",n?" unlimited access":" your personalized experience",".")}(e,c)))),i.createElement(E.xu,{alignItems:"center",display:"flex",sm:{flexDirection:"column"}},i.createElement(I,{userSocialLogins:c}),i.createElement(E.xu,{margin:"0 12px",sm:{margin:"24px 0 0"}},i.createElement(m.G,{declineSuggestedAccount:l,isSocial:!!(c.facebook||c.google||c.twitter)})))))):i.createElement(i.Fragment,null)})))}},94937:(e,t,n)=>{"use strict";n.d(t,{b:()=>O});var r=n(87757),o=n.n(r),i=n(63038),s=n.n(i),a=n(46829),l=n(67294),c=n(70561),u=n(51562),p=n(24087),d=n(66893),m=n(89714),g=n(59317),f=n(4709),v=n(98281),h=n(89894),E=n(80735),b=n(62630),y=n(27572),x=n(51512),P=n(11348),S=n(6522),R="signin_confirmation_banner",O=function(){var e=(0,b.Av)(),t=(0,g.j)().openModal,n=!!(0,d.P5)("enable_confirm_sign_in"),r=!!(0,d.P5)("enable_new_susi_modal"),i=l.useState(!1),O=s()(i,2),I=O[0],w=O[1],_=l.useState(!1),C=s()(_,2),T=C[0],k=C[1],D=l.useState(!0),A=s()(D,2),j=A[0],L=A[1],B=(0,a.useQuery)(p.e).data,M=(B=void 0===B?{viewer:void 0}:B).viewer,N=(0,c.v9)((function(e){return{referrerSource:e.navigation.referrerSource,xsrf:e.session.xsrf}}),c.wU),U=N.referrerSource,F=N.xsrf,H=(0,x.P7)(U||"").name;return l.useEffect((function(){return w(!0)}),[]),l.useEffect((function(){var t;I&&M&&(e.event("experiment.eligible",{experimentId:"b4152480e71c"}),o().async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().awrap((0,P.vA)(null==M?void 0:M.id,F));case 2:t=e.sent,L(t);case 4:case"end":return e.stop()}})),n&&(0,P.oy)(M.id,F))}),[I]),l.useEffect((function(){T&&n&&e.event("signInConfirmationBanner.viewed",{})}),[T]),!(n&&I&&M&&H&&"login"===H&&M.createdAt)||Date.now()-M.createdAt<=5*S.uD||j?null:(T||k(!0),l.createElement(y.cW,{source:{susiEntry:R},extendSource:!0},l.createElement(m.N8,null,l.createElement(f.Y,{onClose:function(){return e.event("signInConfirmationBanner.dismissed",{})}},l.createElement(h.xu,{display:"flex",alignItems:"center"},l.createElement(h.xu,{display:"none",marginRight:"20px",sm:{display:"flex"}},l.createElement(v.ZP,{scale:"S",user:M})),l.createElement(E.F,{color:"DARKER",scale:"M"},l.createElement(u.W,{featureString:"confirm-sign-in-banner",target:"header",tag:"span"},"Welcome back. You are signed"," ",M.mediumMemberAt?"into your member account ":"in as ",l.createElement("b",null,M.email),"."," "),l.createElement(h.rU,{onClick:function(){e.event("signInConfirmationBanner.notYouClicked",{}),t({operation:r?"register":"login",step:"SIGNIN_OPTIONS",susiEntry:R})},linkStyle:"OBVIOUS"},"Not you?")))))))}},4709:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s});var r=n(67294),o=n(28859),i=n(89894),s=function(e){var t=e.children,n=e.onClose,s=r.useRef(null),a=r.useContext(o.u6).updateWatchedBounds;return r.createElement(i.Bn,{initialVisibility:!0},(function(e){var o=e.isVisible,l=e.hide;return o&&r.createElement(i.xu,{backgroundColor:"BASE_LIGHT",borderBottom:"BASE_LIGHTER",borderTop:"BASE_LIGHTER"},r.createElement(i.Pm,null,r.createElement(i.xu,{display:"flex",justifyContent:"space-between",paddingBottom:"20px",paddingTop:"20px"},t,r.createElement(i.PZ,{onClick:function(){n&&n(),a("byline",s,{type:"header"}),l()},isPositionAbsolute:!1,size:"REGULAR"}))))}))}},33572:(e,t,n)=>{"use strict";function r(e){if((e.match(/ /g)||[]).length>1)return"";var t=e.indexOf(" ");return e.substring(0,t)}function o(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}n.d(t,{J:()=>r,S:()=>o})},71794:(e,t,n)=>{"use strict";n.d(t,{j7:()=>p,OO:()=>d,iI:()=>m,m3:()=>g});var r=n(28655),o=n.n(r),i=n(71439),s=n(14391),a=n(22744),l=n(50993);function c(){var e=o()(["\n  fragment shortformPostMetaDescription_post on Post {\n    id\n    metaDescription\n    seoDescription\n    shortformType\n    title\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=o()(["\n  fragment postMetaDescription_post on Post {\n    id\n    title\n    seoDescription\n    metaDescription\n    creator {\n      id\n      name\n    }\n    collection {\n      id\n      name\n    }\n    previewContent {\n      subtitle\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return u=function(){return e},e}var p=function(e){return function(e){var t=e.metaDescription,n=e.seoDescription,r=e.title||"";if(n)return n;if(t)return t;var o=function(e){var t=(0,a.r4)(e,250);return t&&(0,l.N8)(t,200)}(e);if(o.length>150)return o;var i=e.previewContent&&e.previewContent.subtitle||"";if(i.length>140)return i;i.length>0&&(i+=".");var s=(r.length?r+". ":"")+i;if(s.length>140)return s;var c="“".concat(r,"” is published");return e.creator&&e.creator.name&&(c+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(c+=" in ".concat(e.collection.name)),"".concat(i," ").concat(c,".")}(e).trim()},d=function(e,t){var n=e.metaDescription,r=e.seoDescription,o=e.shortformType,i=o===s.po.SHORTFORM_TYPE_NOTE||!o;if(r)return r;if(n)return n;if(i&&t){var c=(0,a.r4)(e,350,0);return(0,l.N8)(c,300)}return""},m=(0,i.Ps)(u(),a.bh),g=(0,i.Ps)(c(),a.bh)},22744:(e,t,n)=>{"use strict";n.d(t,{r4:()=>O,bh:()=>I,yB:()=>w,dm:()=>_,lO:()=>k,Bg:()=>D,_t:()=>A,bq:()=>j,oS:()=>L,Pz:()=>B,ao:()=>M,p3:()=>N});var r=n(59713),o=n.n(r),i=n(28655),s=n.n(i),a=n(71439),l=n(93022),c=n(4743),u=n(14391),p=n(398),d=n(50993);function m(){var e=s()(["\n  fragment shouldIndex_post on Post {\n    id\n    firstPublishedAt\n    isLimitedState\n    isShortform\n    shortformType\n    visibility\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=s()(["\n  fragment shortformPostTitle_post on Post {\n    id\n    title\n    seoTitle\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      ...maybeAppendProductName_collection\n    }\n  }\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function f(){var e=s()(["\n  fragment getTitleForPost_post on Post {\n    id\n    title\n    ...postTitle_post\n    ...getTitleDetails_post\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(){var e=s()(["\n  fragment postTitle_post on Post {\n    id\n    title\n    seoTitle\n    firstPublishedAt\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      id\n      name\n      domain\n      ...maybeAppendProductName_collection\n    }\n    creator {\n      name\n    }\n    previewContent {\n      subtitle\n    }\n  }\n  ","\n  ","\n  ","\n"]);return E=function(){return e},e}function b(){var e=s()(["\n  fragment maybeAppendProductName_collection on Collection {\n    id\n    domain\n  }\n"]);return b=function(){return e},e}function y(){var e=s()(["\n  fragment getTitleDetails_post on Post {\n    id\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...GetTitleIndexMap_bodyModel\n      }\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}function x(){var e=s()(["\n  fragment getPostContentAsString_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          text\n          type\n          mixtapeMetadata {\n            href\n          }\n        }\n      }\n    }\n  }\n"]);return x=function(){return e},e}function P(){var e=s()(["\n  fragment appendPostContext_post on Post {\n    id\n    sequence {\n      title\n    }\n    collection {\n      name\n    }\n    creator {\n      name\n    }\n  }\n"]);return P=function(){return e},e}function S(e,t){var n,r,o;return(null===(n=t.sequence)||void 0===n?void 0:n.title)?e+=" - ".concat(t.sequence.title):(null===(r=t.collection)||void 0===r?void 0:r.name)?e+=" - ".concat(t.collection.name):(null===(o=t.creator)||void 0===o?void 0:o.name)&&(e+=" - ".concat(t.creator.name)),e}var R=(0,a.Ps)(P());function O(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeMixtapeHref:!1},s=i.includeMixtapeHref,a=(null===(t=e.content)||void 0===t||null===(n=t.bodyModel)||void 0===n?void 0:n.paragraphs)||[],l="",c=!0,u=!1,p=void 0;try{for(var d,m=a[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var g=d.value,f=g.mixtapeMetadata,v=g.text,h=g.type;if(s&&(null==f?void 0:f.href)?l+=l?" ".concat(f.href):f.href:"P"===h&&v&&v.length>o&&(l+=l?" ".concat(v):v),l.length>r)break}}catch(e){u=!0,p=e}finally{try{c||null==m.return||m.return()}finally{if(u)throw p}}return l}var I=(0,a.Ps)(x());function w(e){var t=!1,n="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){var r=e.content.bodyModel.paragraphs,o=(0,c.LI)(r).titleIndex;"number"==typeof o&&(n=r[o].text||"",t=!0)}return{hasTitleGraf:t,latestTitle:n}}var _=(0,a.Ps)(y(),I,c.k);function C(e,t,n){return(null==n?void 0:n.domain)?e:"".concat(e," - ").concat(t)}var T=(0,a.Ps)(b());function k(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.seoTitle,s=e.title||"",a=(null===(n=e.previewContent)||void 0===n?void 0:n.subtitle)||"";if(i)return(0,p.p)(i,e.collection&&e.collection.name,t);if(!o)return s.length>50?s:s=C(s=S(s,e),t,e.collection);s.length<33&&a&&(a=(0,d.N8)(a,40),s+=". ".concat(a)),(null===(r=e.creator)||void 0===r?void 0:r.name)&&(s+=" | by ".concat(e.creator.name));var c="",u=Date.now()-5184e6;e.firstPublishedAt>=u&&(c=" | ".concat((0,l.Z)(e.firstPublishedAt,"LLL, yyyy")));var m=e.collection;return m?m.domain?s+="".concat(c," | ").concat(m.name):s+=" | ".concat(m.name).concat(c," | ").concat(t):s+="".concat(c," | ").concat(t),s}var D=(0,a.Ps)(E(),I,R,T);function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w(e),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.title||"",i=n.latestTitle||o,s=h({},e,{title:i});return k(s,t,r).trim()}var j=(0,a.Ps)(f(),D,_);function L(e,t,n){var r=e.seoTitle,o=e.title||"";return r?(0,p.p)(r,e.collection&&e.collection.name,t):o=C(o=S(o=function(e,t,n){var r=t.shortformType,o=r===u.po.SHORTFORM_TYPE_NOTE||!r;return n||(o?e=O(t,250,0):r===u.po.SHORTFORM_TYPE_LINK&&(e=O(t,250,0,{includeMixtapeHref:!0}))),(0,d.N8)(e,200)}(o,e,n),e),t,e.collection)}var B=(0,a.Ps)(g(),I,R,T);function M(e){var t=e.firstPublishedAt,n=e.isLimitedState,r=e.isShortform,o=e.shortformType,i=e.visibility,s=o===u.po.SHORTFORM_TYPE_NOTE||!o;return!(!t||"PUBLIC"!==i&&"LOCKED"!==i||n||r&&!(s?O(e,10,0).length>10:O(e,10,0).length>0))}var N=(0,a.Ps)(m(),I)},398:(e,t,n)=>{"use strict";n.d(t,{N:()=>r,p:()=>o});var r=function(e){return e||"Untitled story"},o=function(e,t,n){return t?"".concat(e," | ").concat(t):n?"".concat(e," | ").concat(n):e}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/1838.22ffd6ec.chunk.js.map